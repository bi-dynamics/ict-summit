"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-nav_2_entry_js"],{

/***/ 9632:
/*!**************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_nav": () => (/* binding */ Nav),
/* harmony export */   "ion_nav_link": () => (/* binding */ NavLink)
/* harmony export */ });
/* harmony import */ var _Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-be218d70.js */ 9866);
/* harmony import */ var _ionic_global_3b28a225_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ionic-global-3b28a225.js */ 3053);
/* harmony import */ var _cubic_bezier_e78d1307_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cubic-bezier-e78d1307.js */ 1463);
/* harmony import */ var _helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers-5eb6364d.js */ 9364);
/* harmony import */ var _index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-93867f4c.js */ 656);
/* harmony import */ var _framework_delegate_28f7ea29_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./framework-delegate-28f7ea29.js */ 6425);

/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */






const VIEW_STATE_NEW = 1;
const VIEW_STATE_ATTACHED = 2;
const VIEW_STATE_DESTROYED = 3;
// TODO(FW-2832): types
class ViewController {
  constructor(component, params) {
    this.component = component;
    this.params = params;
    this.state = VIEW_STATE_NEW;
  }
  init(container) {
    var _this = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.state = VIEW_STATE_ATTACHED;
      if (!_this.element) {
        const component = _this.component;
        _this.element = yield (0,_framework_delegate_28f7ea29_js__WEBPACK_IMPORTED_MODULE_6__.a)(_this.delegate, container, component, ['ion-page', 'ion-page-invisible'], _this.params);
      }
    })();
  }
  /**
   * DOM WRITE
   */
  _destroy() {
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(this.state !== VIEW_STATE_DESTROYED, 'view state must be ATTACHED');
    const element = this.element;
    if (element) {
      if (this.delegate) {
        this.delegate.removeViewFromDom(element.parentElement, element);
      } else {
        element.remove();
      }
    }
    this.nav = undefined;
    this.state = VIEW_STATE_DESTROYED;
  }
}
const matches = (view, id, params) => {
  if (!view) {
    return false;
  }
  if (view.component !== id) {
    return false;
  }
  return (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.s)(view.params, params);
};
const convertToView = (page, params) => {
  if (!page) {
    return null;
  }
  if (page instanceof ViewController) {
    return page;
  }
  return new ViewController(page, params);
};
const convertToViews = pages => {
  return pages.map(page => {
    if (page instanceof ViewController) {
      return page;
    }
    if ('component' in page) {
      return convertToView(page.component, page.componentProps === null ? undefined : page.componentProps);
    }
    return convertToView(page, undefined);
  }).filter(v => v !== null);
};
const navCss = ":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}";
const Nav = class {
  constructor(hostRef) {
    (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionNavWillLoad = (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionNavWillLoad", 7);
    this.ionNavWillChange = (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionNavWillChange", 3);
    this.ionNavDidChange = (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.d)(this, "ionNavDidChange", 3);
    this.transInstr = [];
    this.animationEnabled = true;
    this.useRouter = false;
    this.isTransitioning = false;
    this.destroyed = false;
    this.views = [];
    this.delegate = undefined;
    this.swipeGesture = undefined;
    this.animated = true;
    this.animation = undefined;
    this.rootParams = undefined;
    this.root = undefined;
  }
  swipeGestureChanged() {
    if (this.gesture) {
      this.gesture.enable(this.swipeGesture === true);
    }
  }
  rootChanged() {
    if (this.root !== undefined) {
      if (!this.useRouter) {
        this.setRoot(this.root, this.rootParams);
      }
    }
  }
  componentWillLoad() {
    this.useRouter = document.querySelector('ion-router') !== null && this.el.closest('[no-router]') === null;
    if (this.swipeGesture === undefined) {
      const mode = (0,_ionic_global_3b28a225_js__WEBPACK_IMPORTED_MODULE_2__.b)(this);
      this.swipeGesture = _ionic_global_3b28a225_js__WEBPACK_IMPORTED_MODULE_2__.c.getBoolean('swipeBackEnabled', mode === 'ios');
    }
    this.ionNavWillLoad.emit();
  }
  componentDidLoad() {
    var _this2 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2.rootChanged();
      _this2.gesture = (yield __webpack_require__.e(/*! import() */ "common").then(__webpack_require__.bind(__webpack_require__, /*! ./swipe-back-23e95969.js */ 8271))).createSwipeBackGesture(_this2.el, _this2.canStart.bind(_this2), _this2.onStart.bind(_this2), _this2.onMove.bind(_this2), _this2.onEnd.bind(_this2));
      _this2.swipeGestureChanged();
    })();
  }
  connectedCallback() {
    this.destroyed = false;
  }
  disconnectedCallback() {
    for (const view of this.views) {
      (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.d);
      view._destroy();
    }
    // Release swipe back gesture and transition.
    if (this.gesture) {
      this.gesture.destroy();
      this.gesture = undefined;
    }
    this.transInstr.length = 0;
    this.views.length = 0;
    this.destroyed = true;
  }
  /**
   * Push a new component onto the current navigation stack. Pass any additional
   * information along as an object. This additional information is accessible
   * through NavParams.
   *
   * @param component The component to push onto the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  push(component, componentProps, opts, done) {
    return this.insert(-1, component, componentProps, opts, done);
  }
  /**
   * Inserts a component into the navigation stack at the specified index.
   * This is useful to add a component at any point in the navigation stack.
   *
   * @param insertIndex The index to insert the component at in the stack.
   * @param component The component to insert into the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  insert(insertIndex, component, componentProps, opts, done) {
    return this.insertPages(insertIndex, [{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Inserts an array of components into the navigation stack at the specified index.
   * The last component in the array will become instantiated as a view, and animate
   * in to become the active view.
   *
   * @param insertIndex The index to insert the components at in the stack.
   * @param insertComponents The components to insert into the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  insertPages(insertIndex, insertComponents, opts, done) {
    return this.queueTrns({
      insertStart: insertIndex,
      insertViews: insertComponents,
      opts
    }, done);
  }
  /**
   * Pop a component off of the navigation stack. Navigates back from the current
   * component.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  pop(opts, done) {
    return this.removeIndex(-1, 1, opts, done);
  }
  /**
   * Pop to a specific index in the navigation stack.
   *
   * @param indexOrViewCtrl The index or view controller to pop to.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  popTo(indexOrViewCtrl, opts, done) {
    const ti = {
      removeStart: -1,
      removeCount: -1,
      opts
    };
    if (typeof indexOrViewCtrl === 'object' && indexOrViewCtrl.component) {
      ti.removeView = indexOrViewCtrl;
      ti.removeStart = 1;
    } else if (typeof indexOrViewCtrl === 'number') {
      ti.removeStart = indexOrViewCtrl + 1;
    }
    return this.queueTrns(ti, done);
  }
  /**
   * Navigate back to the root of the stack, no matter how far back that is.
   *
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  popToRoot(opts, done) {
    return this.removeIndex(1, -1, opts, done);
  }
  /**
   * Removes a component from the navigation stack at the specified index.
   *
   * @param startIndex The number to begin removal at.
   * @param removeCount The number of components to remove.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  removeIndex(startIndex, removeCount = 1, opts, done) {
    return this.queueTrns({
      removeStart: startIndex,
      removeCount,
      opts
    }, done);
  }
  /**
   * Set the root for the current navigation stack to a component.
   *
   * @param component The component to set as the root of the navigation stack.
   * @param componentProps Any properties of the component.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  setRoot(component, componentProps, opts, done) {
    return this.setPages([{
      component,
      componentProps
    }], opts, done);
  }
  /**
   * Set the views of the current navigation stack and navigate to the last view.
   * By default animations are disabled, but they can be enabled by passing options
   * to the navigation controller. Navigation parameters can also be passed to the
   * individual pages in the array.
   *
   * @param views The list of views to set as the navigation stack.
   * @param opts The navigation options.
   * @param done The transition complete function.
   */
  setPages(views, opts, done) {
    opts !== null && opts !== void 0 ? opts : opts = {};
    // if animation wasn't set to true then default it to NOT animate
    if (opts.animated !== true) {
      opts.animated = false;
    }
    return this.queueTrns({
      insertStart: 0,
      insertViews: views,
      removeStart: 0,
      removeCount: -1,
      opts
    }, done);
  }
  /**
   * Called by the router to update the view.
   *
   * @param id The component tag.
   * @param params The component params.
   * @param direction A direction hint.
   * @param animation an AnimationBuilder.
   *
   * @return the status.
   * @internal
   */
  setRouteId(id, params, direction, animation) {
    const active = this.getActiveSync();
    if (matches(active, id, params)) {
      return Promise.resolve({
        changed: false,
        element: active.element
      });
    }
    let resolve;
    const promise = new Promise(r => resolve = r);
    let finish;
    const commonOpts = {
      updateURL: false,
      viewIsReady: enteringEl => {
        let mark;
        const p = new Promise(r => mark = r);
        resolve({
          changed: true,
          element: enteringEl,
          markVisible: function () {
            var _ref = (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
              mark();
              yield finish;
            });
            return function markVisible() {
              return _ref.apply(this, arguments);
            };
          }()
        });
        return p;
      }
    };
    if (direction === 'root') {
      finish = this.setRoot(id, params, commonOpts);
    } else {
      // Look for a view matching the target in the view stack.
      const viewController = this.views.find(v => matches(v, id, params));
      if (viewController) {
        finish = this.popTo(viewController, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animationBuilder: animation
        }));
      } else if (direction === 'forward') {
        finish = this.push(id, params, Object.assign(Object.assign({}, commonOpts), {
          animationBuilder: animation
        }));
      } else if (direction === 'back') {
        finish = this.setRoot(id, params, Object.assign(Object.assign({}, commonOpts), {
          direction: 'back',
          animated: true,
          animationBuilder: animation
        }));
      }
    }
    return promise;
  }
  /**
   * Called by <ion-router> to retrieve the current component.
   *
   * @internal
   */
  getRouteId() {
    var _this3 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const active = _this3.getActiveSync();
      if (active) {
        return {
          id: active.element.tagName,
          params: active.params,
          element: active.element
        };
      }
      return undefined;
    })();
  }
  /**
   * Get the active view.
   */
  getActive() {
    var _this4 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this4.getActiveSync();
    })();
  }
  /**
   * Get the view at the specified index.
   *
   * @param index The index of the view.
   */
  getByIndex(index) {
    var _this5 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this5.views[index];
    })();
  }
  /**
   * Returns `true` if the current view can go back.
   *
   * @param view The view to check.
   */
  canGoBack(view) {
    var _this6 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this6.canGoBackSync(view);
    })();
  }
  /**
   * Get the previous view.
   *
   * @param view The view to get.
   */
  getPrevious(view) {
    var _this7 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this7.getPreviousSync(view);
    })();
  }
  getLength() {
    return this.views.length;
  }
  getActiveSync() {
    return this.views[this.views.length - 1];
  }
  canGoBackSync(view = this.getActiveSync()) {
    return !!(view && this.getPreviousSync(view));
  }
  getPreviousSync(view = this.getActiveSync()) {
    if (!view) {
      return undefined;
    }
    const views = this.views;
    const index = views.indexOf(view);
    return index > 0 ? views[index - 1] : undefined;
  }
  /**
   * Adds a navigation stack change to the queue and schedules it to run.
   *
   * @returns Whether the transition succeeds.
   */
  queueTrns(ti, done) {
    var _this8 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      var _a, _b;
      if (_this8.isTransitioning && ((_a = ti.opts) === null || _a === void 0 ? void 0 : _a.skipIfBusy)) {
        return false;
      }
      const promise = new Promise((resolve, reject) => {
        ti.resolve = resolve;
        ti.reject = reject;
      });
      ti.done = done;
      /**
       * If using router, check to see if navigation hooks
       * will allow us to perform this transition. This
       * is required in order for hooks to work with
       * the ion-back-button or swipe to go back.
       */
      if (ti.opts && ti.opts.updateURL !== false && _this8.useRouter) {
        const router = document.querySelector('ion-router');
        if (router) {
          const canTransition = yield router.canTransition();
          if (canTransition === false) {
            return false;
          }
          if (typeof canTransition === 'string') {
            router.push(canTransition, ti.opts.direction || 'back');
            return false;
          }
        }
      }
      // Normalize empty
      if (((_b = ti.insertViews) === null || _b === void 0 ? void 0 : _b.length) === 0) {
        ti.insertViews = undefined;
      }
      // Enqueue transition instruction
      _this8.transInstr.push(ti);
      // if there isn't a transition already happening
      // then this will kick off this transition
      _this8.nextTrns();
      return promise;
    })();
  }
  success(result, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }
    if (ti.done) {
      ti.done(result.hasCompleted, result.requiresTransition, result.enteringView, result.leavingView, result.direction);
    }
    ti.resolve(result.hasCompleted);
    if (ti.opts.updateURL !== false && this.useRouter) {
      const router = document.querySelector('ion-router');
      if (router) {
        const direction = result.direction === 'back' ? 'back' : 'forward';
        router.navChanged(direction);
      }
    }
  }
  failed(rejectReason, ti) {
    if (this.destroyed) {
      this.fireError('nav controller was destroyed', ti);
      return;
    }
    this.transInstr.length = 0;
    this.fireError(rejectReason, ti);
  }
  fireError(rejectReason, ti) {
    if (ti.done) {
      ti.done(false, false, rejectReason);
    }
    if (ti.reject && !this.destroyed) {
      ti.reject(rejectReason);
    } else {
      ti.resolve(false);
    }
  }
  /**
   * Consumes the next transition in the queue.
   *
   * @returns whether the transition is executed.
   */
  nextTrns() {
    // this is the framework's bread 'n butta function
    // only one transition is allowed at any given time
    if (this.isTransitioning) {
      return false;
    }
    // there is no transition happening right now, executes the next instructions.
    const ti = this.transInstr.shift();
    if (!ti) {
      return false;
    }
    this.runTransition(ti);
    return true;
  }
  /** Executes all the transition instruction from the queue. */
  runTransition(ti) {
    var _this9 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      try {
        // set that this nav is actively transitioning
        _this9.ionNavWillChange.emit();
        _this9.isTransitioning = true;
        _this9.prepareTI(ti);
        const leavingView = _this9.getActiveSync();
        const enteringView = _this9.getEnteringView(ti, leavingView);
        if (!leavingView && !enteringView) {
          throw new Error('no views in the stack to be removed');
        }
        if (enteringView && enteringView.state === VIEW_STATE_NEW) {
          yield enteringView.init(_this9.el);
        }
        _this9.postViewInit(enteringView, leavingView, ti);
        // Needs transition?
        const requiresTransition = (ti.enteringRequiresTransition || ti.leavingRequiresTransition) && enteringView !== leavingView;
        if (requiresTransition && ti.opts && leavingView) {
          const isBackDirection = ti.opts.direction === 'back';
          /**
           * If heading back, use the entering page's animation
           * unless otherwise specified by the developer.
           */
          if (isBackDirection) {
            ti.opts.animationBuilder = ti.opts.animationBuilder || (enteringView === null || enteringView === void 0 ? void 0 : enteringView.animationBuilder);
          }
          leavingView.animationBuilder = ti.opts.animationBuilder;
        }
        let result;
        if (requiresTransition) {
          result = yield _this9.transition(enteringView, leavingView, ti);
        } else {
          // transition is not required, so we are already done!
          // they're inserting/removing the views somewhere in the middle or
          // beginning, so visually nothing needs to animate/transition
          // resolve immediately because there's no animation that's happening
          result = {
            hasCompleted: true,
            requiresTransition: false
          };
        }
        _this9.success(result, ti);
        _this9.ionNavDidChange.emit();
      } catch (rejectReason) {
        _this9.failed(rejectReason, ti);
      }
      _this9.isTransitioning = false;
      _this9.nextTrns();
    })();
  }
  prepareTI(ti) {
    var _a, _b;
    var _c;
    const viewsLength = this.views.length;
    (_a = ti.opts) !== null && _a !== void 0 ? _a : ti.opts = {};
    (_b = (_c = ti.opts).delegate) !== null && _b !== void 0 ? _b : _c.delegate = this.delegate;
    if (ti.removeView !== undefined) {
      (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(ti.removeStart !== undefined, 'removeView needs removeStart');
      (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(ti.removeCount !== undefined, 'removeView needs removeCount');
      const index = this.views.indexOf(ti.removeView);
      if (index < 0) {
        throw new Error('removeView was not found');
      }
      ti.removeStart += index;
    }
    if (ti.removeStart !== undefined) {
      if (ti.removeStart < 0) {
        ti.removeStart = viewsLength - 1;
      }
      if (ti.removeCount < 0) {
        ti.removeCount = viewsLength - ti.removeStart;
      }
      ti.leavingRequiresTransition = ti.removeCount > 0 && ti.removeStart + ti.removeCount === viewsLength;
    }
    if (ti.insertViews) {
      // allow -1 to be passed in to auto push it on the end
      // and clean up the index if it's larger then the size of the stack
      if (ti.insertStart < 0 || ti.insertStart > viewsLength) {
        ti.insertStart = viewsLength;
      }
      ti.enteringRequiresTransition = ti.insertStart === viewsLength;
    }
    const insertViews = ti.insertViews;
    if (!insertViews) {
      return;
    }
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(insertViews.length > 0, 'length can not be zero');
    const viewControllers = convertToViews(insertViews);
    if (viewControllers.length === 0) {
      throw new Error('invalid views to insert');
    }
    // Check all the inserted view are correct
    for (const view of viewControllers) {
      view.delegate = ti.opts.delegate;
      const nav = view.nav;
      if (nav && nav !== this) {
        throw new Error('inserted view was already inserted');
      }
      if (view.state === VIEW_STATE_DESTROYED) {
        throw new Error('inserted view was already destroyed');
      }
    }
    ti.insertViews = viewControllers;
  }
  /**
   * Returns the view that will be entered considering the transition instructions.
   *
   * @param ti The instructions.
   * @param leavingView The view being left or undefined if none.
   *
   * @returns The view that will be entered, undefined if none.
   */
  getEnteringView(ti, leavingView) {
    // The last inserted view will be entered when view are inserted.
    const insertViews = ti.insertViews;
    if (insertViews !== undefined) {
      return insertViews[insertViews.length - 1];
    }
    // When views are deleted, we will enter the last view that is not removed and not the view being left.
    const removeStart = ti.removeStart;
    if (removeStart !== undefined) {
      const views = this.views;
      const removeEnd = removeStart + ti.removeCount;
      for (let i = views.length - 1; i >= 0; i--) {
        const view = views[i];
        if ((i < removeStart || i >= removeEnd) && view !== leavingView) {
          return view;
        }
      }
    }
    return undefined;
  }
  /**
   * Adds and Removes the views from the navigation stack.
   *
   * @param enteringView The view being entered.
   * @param leavingView The view being left.
   * @param ti The instructions.
   */
  postViewInit(enteringView, leavingView, ti) {
    var _a, _b, _c;
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(leavingView || enteringView, 'Both leavingView and enteringView are null');
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(ti.resolve, 'resolve must be valid');
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(ti.reject, 'reject must be valid');
    // Compute the views to remove.
    const opts = ti.opts;
    const {
      insertViews,
      removeStart,
      removeCount
    } = ti;
    /** Records the view to destroy */
    let destroyQueue;
    // there are views to remove
    if (removeStart !== undefined && removeCount !== undefined) {
      (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(removeStart >= 0, 'removeStart can not be negative');
      (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(removeCount >= 0, 'removeCount can not be negative');
      destroyQueue = [];
      for (let i = removeStart; i < removeStart + removeCount; i++) {
        const view = this.views[i];
        if (view !== undefined && view !== enteringView && view !== leavingView) {
          destroyQueue.push(view);
        }
      }
      // default the direction to "back"
      (_a = opts.direction) !== null && _a !== void 0 ? _a : opts.direction = 'back';
    }
    const finalNumViews = this.views.length + ((_b = insertViews === null || insertViews === void 0 ? void 0 : insertViews.length) !== null && _b !== void 0 ? _b : 0) - (removeCount !== null && removeCount !== void 0 ? removeCount : 0);
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(finalNumViews >= 0, 'final balance can not be negative');
    if (finalNumViews === 0) {
      console.warn(`You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.`, this, this.el);
      throw new Error('navigation stack needs at least one root page');
    }
    // At this point the transition can not be rejected, any throw should be an error
    // Insert the new views in the stack.
    if (insertViews) {
      // add the views to the
      let insertIndex = ti.insertStart;
      for (const view of insertViews) {
        this.insertViewAt(view, insertIndex);
        insertIndex++;
      }
      if (ti.enteringRequiresTransition) {
        // default to forward if not already set
        (_c = opts.direction) !== null && _c !== void 0 ? _c : opts.direction = 'forward';
      }
    }
    // if the views to be removed are in the beginning or middle
    // and there is not a view that needs to visually transition out
    // then just destroy them and don't transition anything
    // batch all of lifecycles together
    // let's make sure, callbacks are zoned
    if (destroyQueue && destroyQueue.length > 0) {
      for (const view of destroyQueue) {
        (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.b);
        (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.c);
        (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.l)(view.element, _index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.d);
      }
      // once all lifecycle events has been delivered, we can safely detroy the views
      for (const view of destroyQueue) {
        this.destroyView(view);
      }
    }
  }
  transition(enteringView, leavingView, ti) {
    var _this10 = this;
    return (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      // we should animate (duration > 0) if the pushed page is not the first one (startup)
      // or if it is a portal (modal, actionsheet, etc.)
      const opts = ti.opts;
      const progressCallback = opts.progressAnimation ? ani => _this10.sbAni = ani : undefined;
      const mode = (0,_ionic_global_3b28a225_js__WEBPACK_IMPORTED_MODULE_2__.b)(_this10);
      const enteringEl = enteringView.element;
      const leavingEl = leavingView && leavingView.element;
      const animationOpts = Object.assign(Object.assign({
        mode,
        showGoBack: _this10.canGoBackSync(enteringView),
        baseEl: _this10.el,
        progressCallback,
        animated: _this10.animated && _ionic_global_3b28a225_js__WEBPACK_IMPORTED_MODULE_2__.c.getBoolean('animated', true),
        enteringEl,
        leavingEl
      }, opts), {
        animationBuilder: opts.animationBuilder || _this10.animation || _ionic_global_3b28a225_js__WEBPACK_IMPORTED_MODULE_2__.c.get('navAnimation')
      });
      const {
        hasCompleted
      } = yield (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.t)(animationOpts);
      return _this10.transitionFinish(hasCompleted, enteringView, leavingView, opts);
    })();
  }
  transitionFinish(hasCompleted, enteringView, leavingView, opts) {
    /**
     * If the transition did not complete, the leavingView will still be the active
     * view on the stack. Otherwise unmount all the views after the enteringView.
     */
    const activeView = hasCompleted ? enteringView : leavingView;
    if (activeView) {
      this.unmountInactiveViews(activeView);
    }
    return {
      hasCompleted,
      requiresTransition: true,
      enteringView,
      leavingView,
      direction: opts.direction
    };
  }
  /**
   * Inserts a view at the specified index.
   *
   * When the view already is in the stack it will be moved to the new position.
   *
   * @param view The view to insert.
   * @param index The index where to insert the view.
   */
  insertViewAt(view, index) {
    const views = this.views;
    const existingIndex = views.indexOf(view);
    if (existingIndex > -1) {
      (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(view.nav === this, 'view is not part of the nav');
      // The view already in the stack, removes it.
      views.splice(existingIndex, 1);
      // and add it back at the requested index.
      views.splice(index, 0, view);
    } else {
      (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(!view.nav, 'nav is used');
      // this is a new view to add to the stack
      // create the new entering view
      view.nav = this;
      views.splice(index, 0, view);
    }
  }
  /**
   * Removes a view from the stack.
   *
   * @param view The view to remove.
   */
  removeView(view) {
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(view.state === VIEW_STATE_ATTACHED || view.state === VIEW_STATE_DESTROYED, 'view state should be loaded or destroyed');
    const views = this.views;
    const index = views.indexOf(view);
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_4__.o)(index > -1, 'view must be part of the stack');
    if (index >= 0) {
      views.splice(index, 1);
    }
  }
  destroyView(view) {
    view._destroy();
    this.removeView(view);
  }
  /**
   * Unmounts all inactive views after the specified active view.
   *
   * DOM WRITE
   *
   * @param activeView The view that is actively visible in the stack. Used to calculate which views to unmount.
   */
  unmountInactiveViews(activeView) {
    // ok, cleanup time!! Destroy all of the views that are
    // INACTIVE and come after the active view
    // only do this if the views exist, though
    if (this.destroyed) {
      return;
    }
    const views = this.views;
    const activeViewIndex = views.indexOf(activeView);
    for (let i = views.length - 1; i >= 0; i--) {
      const view = views[i];
      /**
       * When inserting multiple views via insertPages
       * the last page will be transitioned to, but the
       * others will not be. As a result, a DOM element
       * will only be created for the last page inserted.
       * As a result, it is possible to have views in the
       * stack that do not have `view.element` yet.
       */
      const element = view.element;
      if (element) {
        if (i > activeViewIndex) {
          // this view comes after the active view
          // let's unload it
          (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.l)(element, _index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.d);
          this.destroyView(view);
        } else if (i < activeViewIndex) {
          // this view comes before the active view
          // and it is not a portal then ensure it is hidden
          (0,_index_93867f4c_js__WEBPACK_IMPORTED_MODULE_5__.s)(element, true);
        }
      }
    }
  }
  canStart() {
    return !!this.swipeGesture && !this.isTransitioning && this.transInstr.length === 0 && this.animationEnabled && this.canGoBackSync();
  }
  onStart() {
    this.pop({
      direction: 'back',
      progressAnimation: true
    });
  }
  onMove(stepValue) {
    if (this.sbAni) {
      this.sbAni.progressStep(stepValue);
    }
  }
  onEnd(shouldComplete, stepValue, dur) {
    if (this.sbAni) {
      this.animationEnabled = false;
      this.sbAni.onFinish(() => {
        this.animationEnabled = true;
      }, {
        oneTimeCallback: true
      });
      // Account for rounding errors in JS
      let newStepValue = shouldComplete ? -0.001 : 0.001;
      /**
       * Animation will be reversed here, so need to
       * reverse the easing curve as well
       *
       * Additionally, we need to account for the time relative
       * to the new easing curve, as `stepValue` is going to be given
       * in terms of a linear curve.
       */
      if (!shouldComplete) {
        this.sbAni.easing('cubic-bezier(1, 0, 0.68, 0.28)');
        newStepValue += (0,_cubic_bezier_e78d1307_js__WEBPACK_IMPORTED_MODULE_3__.g)([0, 0], [1, 0], [0.68, 0.28], [1, 1], stepValue)[0];
      } else {
        newStepValue += (0,_cubic_bezier_e78d1307_js__WEBPACK_IMPORTED_MODULE_3__.g)([0, 0], [0.32, 0.72], [0, 1], [1, 1], stepValue)[0];
      }
      this.sbAni.progressEnd(shouldComplete ? 1 : 0, newStepValue, dur);
    }
  }
  render() {
    return (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null);
  }
  get el() {
    return (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.f)(this);
  }
  static get watchers() {
    return {
      "swipeGesture": ["swipeGestureChanged"],
      "root": ["rootChanged"]
    };
  }
};
Nav.style = navCss;
const navLink = (el, routerDirection, component, componentProps, routerAnimation) => {
  const nav = el.closest('ion-nav');
  if (nav) {
    if (routerDirection === 'forward') {
      if (component !== undefined) {
        return nav.push(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'root') {
      if (component !== undefined) {
        return nav.setRoot(component, componentProps, {
          skipIfBusy: true,
          animationBuilder: routerAnimation
        });
      }
    } else if (routerDirection === 'back') {
      return nav.pop({
        skipIfBusy: true,
        animationBuilder: routerAnimation
      });
    }
  }
  return Promise.resolve(false);
};
const NavLink = class {
  constructor(hostRef) {
    (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.onClick = () => {
      return navLink(this.el, this.routerDirection, this.component, this.componentProps, this.routerAnimation);
    };
    this.component = undefined;
    this.componentProps = undefined;
    this.routerDirection = 'forward';
    this.routerAnimation = undefined;
  }
  render() {
    return (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      onClick: this.onClick
    });
  }
  get el() {
    return (0,_index_be218d70_js__WEBPACK_IMPORTED_MODULE_1__.f)(this);
  }
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLW5hdl8yX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDNkc7QUFDbkM7QUFDQTtBQUNNO0FBQzJGO0FBQ25HO0FBRXhFLE1BQU02QixjQUFjLEdBQUcsQ0FBQztBQUN4QixNQUFNQyxtQkFBbUIsR0FBRyxDQUFDO0FBQzdCLE1BQU1DLG9CQUFvQixHQUFHLENBQUM7QUFDOUI7QUFDQSxNQUFNQyxjQUFjLENBQUM7RUFDbkJDLFdBQVdBLENBQUNDLFNBQVMsRUFBRUMsTUFBTSxFQUFFO0lBQzdCLElBQUksQ0FBQ0QsU0FBUyxHQUFHQSxTQUFTO0lBQzFCLElBQUksQ0FBQ0MsTUFBTSxHQUFHQSxNQUFNO0lBQ3BCLElBQUksQ0FBQ0MsS0FBSyxHQUFHUCxjQUFjO0VBQzdCO0VBQ01RLElBQUlBLENBQUNDLFNBQVMsRUFBRTtJQUFBLElBQUFDLEtBQUE7SUFBQSxPQUFBQywwSUFBQTtNQUNwQkQsS0FBSSxDQUFDSCxLQUFLLEdBQUdOLG1CQUFtQjtNQUNoQyxJQUFJLENBQUNTLEtBQUksQ0FBQ0UsT0FBTyxFQUFFO1FBQ2pCLE1BQU1QLFNBQVMsR0FBR0ssS0FBSSxDQUFDTCxTQUFTO1FBQ2hDSyxLQUFJLENBQUNFLE9BQU8sU0FBU2Isa0VBQWUsQ0FBQ1csS0FBSSxDQUFDRyxRQUFRLEVBQUVKLFNBQVMsRUFBRUosU0FBUyxFQUFFLENBQUMsVUFBVSxFQUFFLG9CQUFvQixDQUFDLEVBQUVLLEtBQUksQ0FBQ0osTUFBTSxDQUFDO01BQzVIO0lBQUM7RUFDSDtFQUNBO0FBQ0Y7QUFDQTtFQUNFUSxRQUFRQSxDQUFBLEVBQUc7SUFDVDNCLHVEQUFNLENBQUMsSUFBSSxDQUFDb0IsS0FBSyxLQUFLTCxvQkFBb0IsRUFBRSw2QkFBNkIsQ0FBQztJQUMxRSxNQUFNVSxPQUFPLEdBQUcsSUFBSSxDQUFDQSxPQUFPO0lBQzVCLElBQUlBLE9B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aURBQUksRUFBRTtNQUFFa08sT0FBTyxFQUFFLElBQUksQ0FBQ0E7SUFBUSxDQUFDLENBQUM7RUFDM0M7RUFDQSxJQUFJckosRUFBRUEsQ0FBQSxFQUFHO0lBQUUsT0FBTy9FLHFEQUFVLENBQUMsSUFBSSxDQUFDO0VBQUU7QUFDdEMsQ0FBQyIsInNvdXJjZXMiOlsiLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW9uLW5hdl8yLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGQgYXMgY3JlYXRlRXZlbnQsIGgsIGYgYXMgZ2V0RWxlbWVudCwgSCBhcyBIb3N0IH0gZnJvbSAnLi9pbmRleC1iZTIxOGQ3MC5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldElvbk1vZGUsIGMgYXMgY29uZmlnIH0gZnJvbSAnLi9pb25pYy1nbG9iYWwtM2IyOGEyMjUuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiB9IGZyb20gJy4vY3ViaWMtYmV6aWVyLWU3OGQxMzA3LmpzJztcbmltcG9ydCB7IG8gYXMgYXNzZXJ0LCBzIGFzIHNoYWxsb3dFcXVhbFN0cmluZ01hcCB9IGZyb20gJy4vaGVscGVycy01ZWI2MzY0ZC5qcyc7XG5pbXBvcnQgeyBsIGFzIGxpZmVjeWNsZSwgdCBhcyB0cmFuc2l0aW9uLCBzIGFzIHNldFBhZ2VIaWRkZW4sIGQgYXMgTElGRUNZQ0xFX1dJTExfVU5MT0FELCBiIGFzIExJRkVDWUNMRV9XSUxMX0xFQVZFLCBjIGFzIExJRkVDWUNMRV9ESURfTEVBVkUgfSBmcm9tICcuL2luZGV4LTkzODY3ZjRjLmpzJztcbmltcG9ydCB7IGEgYXMgYXR0YWNoQ29tcG9uZW50IH0gZnJvbSAnLi9mcmFtZXdvcmstZGVsZWdhdGUtMjhmN2VhMjkuanMnO1xuXG5jb25zdCBWSUVXX1NUQVRFX05FVyA9IDE7XG5jb25zdCBWSUVXX1NUQVRFX0FUVEFDSEVEID0gMjtcbmNvbnN0IFZJRVdfU1RBVEVfREVTVFJPWUVEID0gMztcbi8vIFRPRE8oRlctMjgzMik6IHR5cGVzXG5jbGFzcyBWaWV3Q29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGNvbXBvbmVudCwgcGFyYW1zKSB7XG4gICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgdGhpcy5zdGF0ZSA9IFZJRVdfU1RBVEVfTkVXO1xuICB9XG4gIGFzeW5jIGluaXQoY29udGFpbmVyKSB7XG4gICAgdGhpcy5zdGF0ZSA9IFZJRVdfU1RBVEVfQVRUQUNIRUQ7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgdGhpcy5lbGVtZW50ID0gYXdhaXQgYXR0YWNoQ29tcG9uZW50KHRoaXMuZGVsZWdhdGUsIGNvbnRhaW5lciwgY29tcG9uZW50LCBbJ2lvbi1wYWdlJywgJ2lvbi1wYWdlLWludmlzaWJsZSddLCB0aGlzLnBhcmFtcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBET00gV1JJVEVcbiAgICovXG4gIF9kZXN0cm95KCkge1xuICAgIGFzc2VydCh0aGlzLnN0YXRlICE9PSBWSUVXX1NUQVRFX0RFU1RST1lFRCwgJ3ZpZXcgc3RhdGUgbXVzdCBiZSBBVFRBQ0hFRCcpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIGlmICh0aGlzLmRlbGVnYXRlKSB7XG4gICAgICAgIHRoaXMuZGVsZWdhdGUucmVtb3ZlVmlld0Zyb21Eb20oZWxlbWVudC5wYXJlbnRFbGVtZW50LCBlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm5hdiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnN0YXRlID0gVklFV19TVEFURV9ERVNUUk9ZRUQ7XG4gIH1cbn1cbmNvbnN0IG1hdGNoZXMgPSAodmlldywgaWQsIHBhcmFtcykgPT4ge1xuICBpZiAoIXZpZXcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHZpZXcuY29tcG9uZW50ICE9PSBpZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc2hhbGxvd0VxdWFsU3RyaW5nTWFwKHZpZXcucGFyYW1zLCBwYXJhbXMpO1xufTtcbmNvbnN0IGNvbnZlcnRUb1ZpZXcgPSAocGFnZSwgcGFyYW1zKSA9PiB7XG4gIGlmICghcGFnZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChwYWdlIGluc3RhbmNlb2YgVmlld0NvbnRyb2xsZXIpIHtcbiAgICByZXR1cm4gcGFnZTtcbiAgfVxuICByZXR1cm4gbmV3IFZpZXdDb250cm9sbGVyKHBhZ2UsIHBhcmFtcyk7XG59O1xuY29uc3QgY29udmVydFRvVmlld3MgPSAocGFnZXMpID0+IHtcbiAgcmV0dXJuIHBhZ2VzXG4gICAgLm1hcCgocGFnZSkgPT4ge1xuICAgIGlmIChwYWdlIGluc3RhbmNlb2YgVmlld0NvbnRyb2xsZXIpIHtcbiAgICAgIHJldHVybiBwYWdlO1xuICAgIH1cbiAgICBpZiAoJ2NvbXBvbmVudCcgaW4gcGFnZSkge1xuICAgICAgcmV0dXJuIGNvbnZlcnRUb1ZpZXcocGFnZS5jb21wb25lbnQsIHBhZ2UuY29tcG9uZW50UHJvcHMgPT09IG51bGwgPyB1bmRlZmluZWQgOiBwYWdlLmNvbXBvbmVudFByb3BzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnZlcnRUb1ZpZXcocGFnZSwgdW5kZWZpbmVkKTtcbiAgfSlcbiAgICAuZmlsdGVyKCh2KSA9PiB2ICE9PSBudWxsKTtcbn07XG5cbmNvbnN0IG5hdkNzcyA9IFwiOmhvc3R7bGVmdDowO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7cG9zaXRpb246YWJzb2x1dGU7Y29udGFpbjpsYXlvdXQgc2l6ZSBzdHlsZTtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDowfVwiO1xuXG5jb25zdCBOYXYgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuaW9uTmF2V2lsbExvYWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbk5hdldpbGxMb2FkXCIsIDcpO1xuICAgIHRoaXMuaW9uTmF2V2lsbENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTmF2V2lsbENoYW5nZVwiLCAzKTtcbiAgICB0aGlzLmlvbk5hdkRpZENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uTmF2RGlkQ2hhbmdlXCIsIDMpO1xuICAgIHRoaXMudHJhbnNJbnN0ciA9IFtdO1xuICAgIHRoaXMuYW5pbWF0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgdGhpcy51c2VSb3V0ZXIgPSBmYWxzZTtcbiAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy52aWV3cyA9IFtdO1xuICAgIHRoaXMuZGVsZWdhdGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zd2lwZUdlc3R1cmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5hbmltYXRlZCA9IHRydWU7XG4gICAgdGhpcy5hbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yb290UGFyYW1zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucm9vdCA9IHVuZGVmaW5lZDtcbiAgfVxuICBzd2lwZUdlc3R1cmVDaGFuZ2VkKCkge1xuICAgIGlmICh0aGlzLmdlc3R1cmUpIHtcbiAgICAgIHRoaXMuZ2VzdHVyZS5lbmFibGUodGhpcy5zd2lwZUdlc3R1cmUgPT09IHRydWUpO1xuICAgIH1cbiAgfVxuICByb290Q2hhbmdlZCgpIHtcbiAgICBpZiAodGhpcy5yb290ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRSb290KHRoaXMucm9vdCwgdGhpcy5yb290UGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgdGhpcy51c2VSb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJykgIT09IG51bGwgJiYgdGhpcy5lbC5jbG9zZXN0KCdbbm8tcm91dGVyXScpID09PSBudWxsO1xuICAgIGlmICh0aGlzLnN3aXBlR2VzdHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICAgIHRoaXMuc3dpcGVHZXN0dXJlID0gY29uZmlnLmdldEJvb2xlYW4oJ3N3aXBlQmFja0VuYWJsZWQnLCBtb2RlID09PSAnaW9zJyk7XG4gICAgfVxuICAgIHRoaXMuaW9uTmF2V2lsbExvYWQuZW1pdCgpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgdGhpcy5yb290Q2hhbmdlZCgpO1xuICAgIHRoaXMuZ2VzdHVyZSA9IChhd2FpdCBpbXBvcnQoJy4vc3dpcGUtYmFjay0yM2U5NTk2OS5qcycpKS5jcmVhdGVTd2lwZUJhY2tHZXN0dXJlKHRoaXMuZWwsIHRoaXMuY2FuU3RhcnQuYmluZCh0aGlzKSwgdGhpcy5vblN0YXJ0LmJpbmQodGhpcyksIHRoaXMub25Nb3ZlLmJpbmQodGhpcyksIHRoaXMub25FbmQuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5zd2lwZUdlc3R1cmVDaGFuZ2VkKCk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2YgdGhpcy52aWV3cykge1xuICAgICAgbGlmZWN5Y2xlKHZpZXcuZWxlbWVudCwgTElGRUNZQ0xFX1dJTExfVU5MT0FEKTtcbiAgICAgIHZpZXcuX2Rlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gUmVsZWFzZSBzd2lwZSBiYWNrIGdlc3R1cmUgYW5kIHRyYW5zaXRpb24uXG4gICAgaWYgKHRoaXMuZ2VzdHVyZSkge1xuICAgICAgdGhpcy5nZXN0dXJlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuZ2VzdHVyZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy50cmFuc0luc3RyLmxlbmd0aCA9IDA7XG4gICAgdGhpcy52aWV3cy5sZW5ndGggPSAwO1xuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogUHVzaCBhIG5ldyBjb21wb25lbnQgb250byB0aGUgY3VycmVudCBuYXZpZ2F0aW9uIHN0YWNrLiBQYXNzIGFueSBhZGRpdGlvbmFsXG4gICAqIGluZm9ybWF0aW9uIGFsb25nIGFzIGFuIG9iamVjdC4gVGhpcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGlzIGFjY2Vzc2libGVcbiAgICogdGhyb3VnaCBOYXZQYXJhbXMuXG4gICAqXG4gICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byBwdXNoIG9udG8gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAqIEBwYXJhbSBjb21wb25lbnRQcm9wcyBBbnkgcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICovXG4gIHB1c2goY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLmluc2VydCgtMSwgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydHMgYSBjb21wb25lbnQgaW50byB0aGUgbmF2aWdhdGlvbiBzdGFjayBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBhZGQgYSBjb21wb25lbnQgYXQgYW55IHBvaW50IGluIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgKlxuICAgKiBAcGFyYW0gaW5zZXJ0SW5kZXggVGhlIGluZGV4IHRvIGluc2VydCB0aGUgY29tcG9uZW50IGF0IGluIHRoZSBzdGFjay5cbiAgICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIGluc2VydCBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrLlxuICAgKiBAcGFyYW0gY29tcG9uZW50UHJvcHMgQW55IHByb3BlcnRpZXMgb2YgdGhlIGNvbXBvbmVudC5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBpbnNlcnQoaW5zZXJ0SW5kZXgsIGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIG9wdHMsIGRvbmUpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRQYWdlcyhpbnNlcnRJbmRleCwgW3sgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcyB9XSwgb3B0cywgZG9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIEluc2VydHMgYW4gYXJyYXkgb2YgY29tcG9uZW50cyBpbnRvIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqIFRoZSBsYXN0IGNvbXBvbmVudCBpbiB0aGUgYXJyYXkgd2lsbCBiZWNvbWUgaW5zdGFudGlhdGVkIGFzIGEgdmlldywgYW5kIGFuaW1hdGVcbiAgICogaW4gdG8gYmVjb21lIHRoZSBhY3RpdmUgdmlldy5cbiAgICpcbiAgICogQHBhcmFtIGluc2VydEluZGV4IFRoZSBpbmRleCB0byBpbnNlcnQgdGhlIGNvbXBvbmVudHMgYXQgaW4gdGhlIHN0YWNrLlxuICAgKiBAcGFyYW0gaW5zZXJ0Q29tcG9uZW50cyBUaGUgY29tcG9uZW50cyB0byBpbnNlcnQgaW50byB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBpbnNlcnRQYWdlcyhpbnNlcnRJbmRleCwgaW5zZXJ0Q29tcG9uZW50cywgb3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlVHJucyh7XG4gICAgICBpbnNlcnRTdGFydDogaW5zZXJ0SW5kZXgsXG4gICAgICBpbnNlcnRWaWV3czogaW5zZXJ0Q29tcG9uZW50cyxcbiAgICAgIG9wdHMsXG4gICAgfSwgZG9uZSk7XG4gIH1cbiAgLyoqXG4gICAqIFBvcCBhIGNvbXBvbmVudCBvZmYgb2YgdGhlIG5hdmlnYXRpb24gc3RhY2suIE5hdmlnYXRlcyBiYWNrIGZyb20gdGhlIGN1cnJlbnRcbiAgICogY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICovXG4gIHBvcChvcHRzLCBkb25lKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlSW5kZXgoLTEsIDEsIG9wdHMsIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBQb3AgdG8gYSBzcGVjaWZpYyBpbmRleCBpbiB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICpcbiAgICogQHBhcmFtIGluZGV4T3JWaWV3Q3RybCBUaGUgaW5kZXggb3IgdmlldyBjb250cm9sbGVyIHRvIHBvcCB0by5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBwb3BUbyhpbmRleE9yVmlld0N0cmwsIG9wdHMsIGRvbmUpIHtcbiAgICBjb25zdCB0aSA9IHtcbiAgICAgIHJlbW92ZVN0YXJ0OiAtMSxcbiAgICAgIHJlbW92ZUNvdW50OiAtMSxcbiAgICAgIG9wdHMsXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIGluZGV4T3JWaWV3Q3RybCA9PT0gJ29iamVjdCcgJiYgaW5kZXhPclZpZXdDdHJsLmNvbXBvbmVudCkge1xuICAgICAgdGkucmVtb3ZlVmlldyA9IGluZGV4T3JWaWV3Q3RybDtcbiAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGluZGV4T3JWaWV3Q3RybCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gaW5kZXhPclZpZXdDdHJsICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHRpLCBkb25lKTtcbiAgfVxuICAvKipcbiAgICogTmF2aWdhdGUgYmFjayB0byB0aGUgcm9vdCBvZiB0aGUgc3RhY2ssIG5vIG1hdHRlciBob3cgZmFyIGJhY2sgdGhhdCBpcy5cbiAgICpcbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBwb3BUb1Jvb3Qob3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUluZGV4KDEsIC0xLCBvcHRzLCBkb25lKTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIHRoZSBuYXZpZ2F0aW9uIHN0YWNrIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydEluZGV4IFRoZSBudW1iZXIgdG8gYmVnaW4gcmVtb3ZhbCBhdC5cbiAgICogQHBhcmFtIHJlbW92ZUNvdW50IFRoZSBudW1iZXIgb2YgY29tcG9uZW50cyB0byByZW1vdmUuXG4gICAqIEBwYXJhbSBvcHRzIFRoZSBuYXZpZ2F0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSBkb25lIFRoZSB0cmFuc2l0aW9uIGNvbXBsZXRlIGZ1bmN0aW9uLlxuICAgKi9cbiAgcmVtb3ZlSW5kZXgoc3RhcnRJbmRleCwgcmVtb3ZlQ291bnQgPSAxLCBvcHRzLCBkb25lKSB7XG4gICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHtcbiAgICAgIHJlbW92ZVN0YXJ0OiBzdGFydEluZGV4LFxuICAgICAgcmVtb3ZlQ291bnQsXG4gICAgICBvcHRzLFxuICAgIH0sIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHJvb3QgZm9yIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhY2sgdG8gYSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB0byBzZXQgYXMgdGhlIHJvb3Qgb2YgdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAqIEBwYXJhbSBjb21wb25lbnRQcm9wcyBBbnkgcHJvcGVydGllcyBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0gb3B0cyBUaGUgbmF2aWdhdGlvbiBvcHRpb25zLlxuICAgKiBAcGFyYW0gZG9uZSBUaGUgdHJhbnNpdGlvbiBjb21wbGV0ZSBmdW5jdGlvbi5cbiAgICovXG4gIHNldFJvb3QoY29tcG9uZW50LCBjb21wb25lbnRQcm9wcywgb3B0cywgZG9uZSkge1xuICAgIHJldHVybiB0aGlzLnNldFBhZ2VzKFt7IGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMgfV0sIG9wdHMsIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpZXdzIG9mIHRoZSBjdXJyZW50IG5hdmlnYXRpb24gc3RhY2sgYW5kIG5hdmlnYXRlIHRvIHRoZSBsYXN0IHZpZXcuXG4gICAqIEJ5IGRlZmF1bHQgYW5pbWF0aW9ucyBhcmUgZGlzYWJsZWQsIGJ1dCB0aGV5IGNhbiBiZSBlbmFibGVkIGJ5IHBhc3Npbmcgb3B0aW9uc1xuICAgKiB0byB0aGUgbmF2aWdhdGlvbiBjb250cm9sbGVyLiBOYXZpZ2F0aW9uIHBhcmFtZXRlcnMgY2FuIGFsc28gYmUgcGFzc2VkIHRvIHRoZVxuICAgKiBpbmRpdmlkdWFsIHBhZ2VzIGluIHRoZSBhcnJheS5cbiAgICpcbiAgICogQHBhcmFtIHZpZXdzIFRoZSBsaXN0IG9mIHZpZXdzIHRvIHNldCBhcyB0aGUgbmF2aWdhdGlvbiBzdGFjay5cbiAgICogQHBhcmFtIG9wdHMgVGhlIG5hdmlnYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIGRvbmUgVGhlIHRyYW5zaXRpb24gY29tcGxldGUgZnVuY3Rpb24uXG4gICAqL1xuICBzZXRQYWdlcyh2aWV3cywgb3B0cywgZG9uZSkge1xuICAgIG9wdHMgIT09IG51bGwgJiYgb3B0cyAhPT0gdm9pZCAwID8gb3B0cyA6IChvcHRzID0ge30pO1xuICAgIC8vIGlmIGFuaW1hdGlvbiB3YXNuJ3Qgc2V0IHRvIHRydWUgdGhlbiBkZWZhdWx0IGl0IHRvIE5PVCBhbmltYXRlXG4gICAgaWYgKG9wdHMuYW5pbWF0ZWQgIT09IHRydWUpIHtcbiAgICAgIG9wdHMuYW5pbWF0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucXVldWVUcm5zKHtcbiAgICAgIGluc2VydFN0YXJ0OiAwLFxuICAgICAgaW5zZXJ0Vmlld3M6IHZpZXdzLFxuICAgICAgcmVtb3ZlU3RhcnQ6IDAsXG4gICAgICByZW1vdmVDb3VudDogLTEsXG4gICAgICBvcHRzLFxuICAgIH0sIGRvbmUpO1xuICB9XG4gIC8qKlxuICAgKiBDYWxsZWQgYnkgdGhlIHJvdXRlciB0byB1cGRhdGUgdGhlIHZpZXcuXG4gICAqXG4gICAqIEBwYXJhbSBpZCBUaGUgY29tcG9uZW50IHRhZy5cbiAgICogQHBhcmFtIHBhcmFtcyBUaGUgY29tcG9uZW50IHBhcmFtcy5cbiAgICogQHBhcmFtIGRpcmVjdGlvbiBBIGRpcmVjdGlvbiBoaW50LlxuICAgKiBAcGFyYW0gYW5pbWF0aW9uIGFuIEFuaW1hdGlvbkJ1aWxkZXIuXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIHN0YXR1cy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRSb3V0ZUlkKGlkLCBwYXJhbXMsIGRpcmVjdGlvbiwgYW5pbWF0aW9uKSB7XG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgaWYgKG1hdGNoZXMoYWN0aXZlLCBpZCwgcGFyYW1zKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICBlbGVtZW50OiBhY3RpdmUuZWxlbWVudCxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHIpID0+IChyZXNvbHZlID0gcikpO1xuICAgIGxldCBmaW5pc2g7XG4gICAgY29uc3QgY29tbW9uT3B0cyA9IHtcbiAgICAgIHVwZGF0ZVVSTDogZmFsc2UsXG4gICAgICB2aWV3SXNSZWFkeTogKGVudGVyaW5nRWwpID0+IHtcbiAgICAgICAgbGV0IG1hcms7XG4gICAgICAgIGNvbnN0IHAgPSBuZXcgUHJvbWlzZSgocikgPT4gKG1hcmsgPSByKSk7XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIGNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgZWxlbWVudDogZW50ZXJpbmdFbCxcbiAgICAgICAgICBtYXJrVmlzaWJsZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbWFyaygpO1xuICAgICAgICAgICAgYXdhaXQgZmluaXNoO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoZGlyZWN0aW9uID09PSAncm9vdCcpIHtcbiAgICAgIGZpbmlzaCA9IHRoaXMuc2V0Um9vdChpZCwgcGFyYW1zLCBjb21tb25PcHRzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBMb29rIGZvciBhIHZpZXcgbWF0Y2hpbmcgdGhlIHRhcmdldCBpbiB0aGUgdmlldyBzdGFjay5cbiAgICAgIGNvbnN0IHZpZXdDb250cm9sbGVyID0gdGhpcy52aWV3cy5maW5kKCh2KSA9PiBtYXRjaGVzKHYsIGlkLCBwYXJhbXMpKTtcbiAgICAgIGlmICh2aWV3Q29udHJvbGxlcikge1xuICAgICAgICBmaW5pc2ggPSB0aGlzLnBvcFRvKHZpZXdDb250cm9sbGVyLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vbk9wdHMpLCB7IGRpcmVjdGlvbjogJ2JhY2snLCBhbmltYXRpb25CdWlsZGVyOiBhbmltYXRpb24gfSkpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZm9yd2FyZCcpIHtcbiAgICAgICAgZmluaXNoID0gdGhpcy5wdXNoKGlkLCBwYXJhbXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uT3B0cyksIHsgYW5pbWF0aW9uQnVpbGRlcjogYW5pbWF0aW9uIH0pKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2JhY2snKSB7XG4gICAgICAgIGZpbmlzaCA9IHRoaXMuc2V0Um9vdChpZCwgcGFyYW1zLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vbk9wdHMpLCB7IGRpcmVjdGlvbjogJ2JhY2snLCBhbmltYXRlZDogdHJ1ZSwgYW5pbWF0aW9uQnVpbGRlcjogYW5pbWF0aW9uIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCBieSA8aW9uLXJvdXRlcj4gdG8gcmV0cmlldmUgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIGdldFJvdXRlSWQoKSB7XG4gICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGFjdGl2ZS5lbGVtZW50LnRhZ05hbWUsXG4gICAgICAgIHBhcmFtczogYWN0aXZlLnBhcmFtcyxcbiAgICAgICAgZWxlbWVudDogYWN0aXZlLmVsZW1lbnQsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFjdGl2ZSB2aWV3LlxuICAgKi9cbiAgYXN5bmMgZ2V0QWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVN5bmMoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSB2aWV3IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXG4gICAqXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHZpZXcuXG4gICAqL1xuICBhc3luYyBnZXRCeUluZGV4KGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3NbaW5kZXhdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY3VycmVudCB2aWV3IGNhbiBnbyBiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBjaGVjay5cbiAgICovXG4gIGFzeW5jIGNhbkdvQmFjayh2aWV3KSB7XG4gICAgcmV0dXJuIHRoaXMuY2FuR29CYWNrU3luYyh2aWV3KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBwcmV2aW91cyB2aWV3LlxuICAgKlxuICAgKiBAcGFyYW0gdmlldyBUaGUgdmlldyB0byBnZXQuXG4gICAqL1xuICBhc3luYyBnZXRQcmV2aW91cyh2aWV3KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UHJldmlvdXNTeW5jKHZpZXcpO1xuICB9XG4gIGdldExlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3cy5sZW5ndGg7XG4gIH1cbiAgZ2V0QWN0aXZlU3luYygpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3c1t0aGlzLnZpZXdzLmxlbmd0aCAtIDFdO1xuICB9XG4gIGNhbkdvQmFja1N5bmModmlldyA9IHRoaXMuZ2V0QWN0aXZlU3luYygpKSB7XG4gICAgcmV0dXJuICEhKHZpZXcgJiYgdGhpcy5nZXRQcmV2aW91c1N5bmModmlldykpO1xuICB9XG4gIGdldFByZXZpb3VzU3luYyh2aWV3ID0gdGhpcy5nZXRBY3RpdmVTeW5jKCkpIHtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICBjb25zdCBpbmRleCA9IHZpZXdzLmluZGV4T2Yodmlldyk7XG4gICAgcmV0dXJuIGluZGV4ID4gMCA/IHZpZXdzW2luZGV4IC0gMV0gOiB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBuYXZpZ2F0aW9uIHN0YWNrIGNoYW5nZSB0byB0aGUgcXVldWUgYW5kIHNjaGVkdWxlcyBpdCB0byBydW4uXG4gICAqXG4gICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIHRyYW5zaXRpb24gc3VjY2VlZHMuXG4gICAqL1xuICBhc3luYyBxdWV1ZVRybnModGksIGRvbmUpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGlmICh0aGlzLmlzVHJhbnNpdGlvbmluZyAmJiAoKF9hID0gdGkub3B0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNraXBJZkJ1c3kpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIHRpLnJlamVjdCA9IHJlamVjdDtcbiAgICB9KTtcbiAgICB0aS5kb25lID0gZG9uZTtcbiAgICAvKipcbiAgICAgKiBJZiB1c2luZyByb3V0ZXIsIGNoZWNrIHRvIHNlZSBpZiBuYXZpZ2F0aW9uIGhvb2tzXG4gICAgICogd2lsbCBhbGxvdyB1cyB0byBwZXJmb3JtIHRoaXMgdHJhbnNpdGlvbi4gVGhpc1xuICAgICAqIGlzIHJlcXVpcmVkIGluIG9yZGVyIGZvciBob29rcyB0byB3b3JrIHdpdGhcbiAgICAgKiB0aGUgaW9uLWJhY2stYnV0dG9uIG9yIHN3aXBlIHRvIGdvIGJhY2suXG4gICAgICovXG4gICAgaWYgKHRpLm9wdHMgJiYgdGkub3B0cy51cGRhdGVVUkwgIT09IGZhbHNlICYmIHRoaXMudXNlUm91dGVyKSB7XG4gICAgICBjb25zdCByb3V0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJyk7XG4gICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgIGNvbnN0IGNhblRyYW5zaXRpb24gPSBhd2FpdCByb3V0ZXIuY2FuVHJhbnNpdGlvbigpO1xuICAgICAgICBpZiAoY2FuVHJhbnNpdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjYW5UcmFuc2l0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJvdXRlci5wdXNoKGNhblRyYW5zaXRpb24sIHRpLm9wdHMuZGlyZWN0aW9uIHx8ICdiYWNrJyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE5vcm1hbGl6ZSBlbXB0eVxuICAgIGlmICgoKF9iID0gdGkuaW5zZXJ0Vmlld3MpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sZW5ndGgpID09PSAwKSB7XG4gICAgICB0aS5pbnNlcnRWaWV3cyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gRW5xdWV1ZSB0cmFuc2l0aW9uIGluc3RydWN0aW9uXG4gICAgdGhpcy50cmFuc0luc3RyLnB1c2godGkpO1xuICAgIC8vIGlmIHRoZXJlIGlzbid0IGEgdHJhbnNpdGlvbiBhbHJlYWR5IGhhcHBlbmluZ1xuICAgIC8vIHRoZW4gdGhpcyB3aWxsIGtpY2sgb2ZmIHRoaXMgdHJhbnNpdGlvblxuICAgIHRoaXMubmV4dFRybnMoKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuICBzdWNjZXNzKHJlc3VsdCwgdGkpIHtcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHRoaXMuZmlyZUVycm9yKCduYXYgY29udHJvbGxlciB3YXMgZGVzdHJveWVkJywgdGkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGkuZG9uZSkge1xuICAgICAgdGkuZG9uZShyZXN1bHQuaGFzQ29tcGxldGVkLCByZXN1bHQucmVxdWlyZXNUcmFuc2l0aW9uLCByZXN1bHQuZW50ZXJpbmdWaWV3LCByZXN1bHQubGVhdmluZ1ZpZXcsIHJlc3VsdC5kaXJlY3Rpb24pO1xuICAgIH1cbiAgICB0aS5yZXNvbHZlKHJlc3VsdC5oYXNDb21wbGV0ZWQpO1xuICAgIGlmICh0aS5vcHRzLnVwZGF0ZVVSTCAhPT0gZmFsc2UgJiYgdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgIGNvbnN0IHJvdXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yb3V0ZXInKTtcbiAgICAgIGlmIChyb3V0ZXIpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcmVzdWx0LmRpcmVjdGlvbiA9PT0gJ2JhY2snID8gJ2JhY2snIDogJ2ZvcndhcmQnO1xuICAgICAgICByb3V0ZXIubmF2Q2hhbmdlZChkaXJlY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmYWlsZWQocmVqZWN0UmVhc29uLCB0aSkge1xuICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgdGhpcy5maXJlRXJyb3IoJ25hdiBjb250cm9sbGVyIHdhcyBkZXN0cm95ZWQnLCB0aSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudHJhbnNJbnN0ci5sZW5ndGggPSAwO1xuICAgIHRoaXMuZmlyZUVycm9yKHJlamVjdFJlYXNvbiwgdGkpO1xuICB9XG4gIGZpcmVFcnJvcihyZWplY3RSZWFzb24sIHRpKSB7XG4gICAgaWYgKHRpLmRvbmUpIHtcbiAgICAgIHRpLmRvbmUoZmFsc2UsIGZhbHNlLCByZWplY3RSZWFzb24pO1xuICAgIH1cbiAgICBpZiAodGkucmVqZWN0ICYmICF0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgdGkucmVqZWN0KHJlamVjdFJlYXNvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGkucmVzb2x2ZShmYWxzZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb25zdW1lcyB0aGUgbmV4dCB0cmFuc2l0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICpcbiAgICogQHJldHVybnMgd2hldGhlciB0aGUgdHJhbnNpdGlvbiBpcyBleGVjdXRlZC5cbiAgICovXG4gIG5leHRUcm5zKCkge1xuICAgIC8vIHRoaXMgaXMgdGhlIGZyYW1ld29yaydzIGJyZWFkICduIGJ1dHRhIGZ1bmN0aW9uXG4gICAgLy8gb25seSBvbmUgdHJhbnNpdGlvbiBpcyBhbGxvd2VkIGF0IGFueSBnaXZlbiB0aW1lXG4gICAgaWYgKHRoaXMuaXNUcmFuc2l0aW9uaW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHRoZXJlIGlzIG5vIHRyYW5zaXRpb24gaGFwcGVuaW5nIHJpZ2h0IG5vdywgZXhlY3V0ZXMgdGhlIG5leHQgaW5zdHJ1Y3Rpb25zLlxuICAgIGNvbnN0IHRpID0gdGhpcy50cmFuc0luc3RyLnNoaWZ0KCk7XG4gICAgaWYgKCF0aSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLnJ1blRyYW5zaXRpb24odGkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKiBFeGVjdXRlcyBhbGwgdGhlIHRyYW5zaXRpb24gaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgcXVldWUuICovXG4gIGFzeW5jIHJ1blRyYW5zaXRpb24odGkpIHtcbiAgICB0cnkge1xuICAgICAgLy8gc2V0IHRoYXQgdGhpcyBuYXYgaXMgYWN0aXZlbHkgdHJhbnNpdGlvbmluZ1xuICAgICAgdGhpcy5pb25OYXZXaWxsQ2hhbmdlLmVtaXQoKTtcbiAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMucHJlcGFyZVRJKHRpKTtcbiAgICAgIGNvbnN0IGxlYXZpbmdWaWV3ID0gdGhpcy5nZXRBY3RpdmVTeW5jKCk7XG4gICAgICBjb25zdCBlbnRlcmluZ1ZpZXcgPSB0aGlzLmdldEVudGVyaW5nVmlldyh0aSwgbGVhdmluZ1ZpZXcpO1xuICAgICAgaWYgKCFsZWF2aW5nVmlldyAmJiAhZW50ZXJpbmdWaWV3KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gdmlld3MgaW4gdGhlIHN0YWNrIHRvIGJlIHJlbW92ZWQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbnRlcmluZ1ZpZXcgJiYgZW50ZXJpbmdWaWV3LnN0YXRlID09PSBWSUVXX1NUQVRFX05FVykge1xuICAgICAgICBhd2FpdCBlbnRlcmluZ1ZpZXcuaW5pdCh0aGlzLmVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucG9zdFZpZXdJbml0KGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKTtcbiAgICAgIC8vIE5lZWRzIHRyYW5zaXRpb24/XG4gICAgICBjb25zdCByZXF1aXJlc1RyYW5zaXRpb24gPSAodGkuZW50ZXJpbmdSZXF1aXJlc1RyYW5zaXRpb24gfHwgdGkubGVhdmluZ1JlcXVpcmVzVHJhbnNpdGlvbikgJiYgZW50ZXJpbmdWaWV3ICE9PSBsZWF2aW5nVmlldztcbiAgICAgIGlmIChyZXF1aXJlc1RyYW5zaXRpb24gJiYgdGkub3B0cyAmJiBsZWF2aW5nVmlldykge1xuICAgICAgICBjb25zdCBpc0JhY2tEaXJlY3Rpb24gPSB0aS5vcHRzLmRpcmVjdGlvbiA9PT0gJ2JhY2snO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgaGVhZGluZyBiYWNrLCB1c2UgdGhlIGVudGVyaW5nIHBhZ2UncyBhbmltYXRpb25cbiAgICAgICAgICogdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQgYnkgdGhlIGRldmVsb3Blci5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpc0JhY2tEaXJlY3Rpb24pIHtcbiAgICAgICAgICB0aS5vcHRzLmFuaW1hdGlvbkJ1aWxkZXIgPSB0aS5vcHRzLmFuaW1hdGlvbkJ1aWxkZXIgfHwgKGVudGVyaW5nVmlldyA9PT0gbnVsbCB8fCBlbnRlcmluZ1ZpZXcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVudGVyaW5nVmlldy5hbmltYXRpb25CdWlsZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBsZWF2aW5nVmlldy5hbmltYXRpb25CdWlsZGVyID0gdGkub3B0cy5hbmltYXRpb25CdWlsZGVyO1xuICAgICAgfVxuICAgICAgbGV0IHJlc3VsdDtcbiAgICAgIGlmIChyZXF1aXJlc1RyYW5zaXRpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy50cmFuc2l0aW9uKGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyB0cmFuc2l0aW9uIGlzIG5vdCByZXF1aXJlZCwgc28gd2UgYXJlIGFscmVhZHkgZG9uZSFcbiAgICAgICAgLy8gdGhleSdyZSBpbnNlcnRpbmcvcmVtb3ZpbmcgdGhlIHZpZXdzIHNvbWV3aGVyZSBpbiB0aGUgbWlkZGxlIG9yXG4gICAgICAgIC8vIGJlZ2lubmluZywgc28gdmlzdWFsbHkgbm90aGluZyBuZWVkcyB0byBhbmltYXRlL3RyYW5zaXRpb25cbiAgICAgICAgLy8gcmVzb2x2ZSBpbW1lZGlhdGVseSBiZWNhdXNlIHRoZXJlJ3Mgbm8gYW5pbWF0aW9uIHRoYXQncyBoYXBwZW5pbmdcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIGhhc0NvbXBsZXRlZDogdHJ1ZSxcbiAgICAgICAgICByZXF1aXJlc1RyYW5zaXRpb246IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgdGhpcy5zdWNjZXNzKHJlc3VsdCwgdGkpO1xuICAgICAgdGhpcy5pb25OYXZEaWRDaGFuZ2UuZW1pdCgpO1xuICAgIH1cbiAgICBjYXRjaCAocmVqZWN0UmVhc29uKSB7XG4gICAgICB0aGlzLmZhaWxlZChyZWplY3RSZWFzb24sIHRpKTtcbiAgICB9XG4gICAgdGhpcy5pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICB0aGlzLm5leHRUcm5zKCk7XG4gIH1cbiAgcHJlcGFyZVRJKHRpKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICB2YXIgX2M7XG4gICAgY29uc3Qgdmlld3NMZW5ndGggPSB0aGlzLnZpZXdzLmxlbmd0aDtcbiAgICAoX2EgPSB0aS5vcHRzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAodGkub3B0cyA9IHt9KTtcbiAgICAoX2IgPSAoX2MgPSB0aS5vcHRzKS5kZWxlZ2F0ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogKF9jLmRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZSk7XG4gICAgaWYgKHRpLnJlbW92ZVZpZXcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYXNzZXJ0KHRpLnJlbW92ZVN0YXJ0ICE9PSB1bmRlZmluZWQsICdyZW1vdmVWaWV3IG5lZWRzIHJlbW92ZVN0YXJ0Jyk7XG4gICAgICBhc3NlcnQodGkucmVtb3ZlQ291bnQgIT09IHVuZGVmaW5lZCwgJ3JlbW92ZVZpZXcgbmVlZHMgcmVtb3ZlQ291bnQnKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy52aWV3cy5pbmRleE9mKHRpLnJlbW92ZVZpZXcpO1xuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZVZpZXcgd2FzIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgdGkucmVtb3ZlU3RhcnQgKz0gaW5kZXg7XG4gICAgfVxuICAgIGlmICh0aS5yZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGkucmVtb3ZlU3RhcnQgPCAwKSB7XG4gICAgICAgIHRpLnJlbW92ZVN0YXJ0ID0gdmlld3NMZW5ndGggLSAxO1xuICAgICAgfVxuICAgICAgaWYgKHRpLnJlbW92ZUNvdW50IDwgMCkge1xuICAgICAgICB0aS5yZW1vdmVDb3VudCA9IHZpZXdzTGVuZ3RoIC0gdGkucmVtb3ZlU3RhcnQ7XG4gICAgICB9XG4gICAgICB0aS5sZWF2aW5nUmVxdWlyZXNUcmFuc2l0aW9uID0gdGkucmVtb3ZlQ291bnQgPiAwICYmIHRpLnJlbW92ZVN0YXJ0ICsgdGkucmVtb3ZlQ291bnQgPT09IHZpZXdzTGVuZ3RoO1xuICAgIH1cbiAgICBpZiAodGkuaW5zZXJ0Vmlld3MpIHtcbiAgICAgIC8vIGFsbG93IC0xIHRvIGJlIHBhc3NlZCBpbiB0byBhdXRvIHB1c2ggaXQgb24gdGhlIGVuZFxuICAgICAgLy8gYW5kIGNsZWFuIHVwIHRoZSBpbmRleCBpZiBpdCdzIGxhcmdlciB0aGVuIHRoZSBzaXplIG9mIHRoZSBzdGFja1xuICAgICAgaWYgKHRpLmluc2VydFN0YXJ0IDwgMCB8fCB0aS5pbnNlcnRTdGFydCA+IHZpZXdzTGVuZ3RoKSB7XG4gICAgICAgIHRpLmluc2VydFN0YXJ0ID0gdmlld3NMZW5ndGg7XG4gICAgICB9XG4gICAgICB0aS5lbnRlcmluZ1JlcXVpcmVzVHJhbnNpdGlvbiA9IHRpLmluc2VydFN0YXJ0ID09PSB2aWV3c0xlbmd0aDtcbiAgICB9XG4gICAgY29uc3QgaW5zZXJ0Vmlld3MgPSB0aS5pbnNlcnRWaWV3cztcbiAgICBpZiAoIWluc2VydFZpZXdzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2VydChpbnNlcnRWaWV3cy5sZW5ndGggPiAwLCAnbGVuZ3RoIGNhbiBub3QgYmUgemVybycpO1xuICAgIGNvbnN0IHZpZXdDb250cm9sbGVycyA9IGNvbnZlcnRUb1ZpZXdzKGluc2VydFZpZXdzKTtcbiAgICBpZiAodmlld0NvbnRyb2xsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHZpZXdzIHRvIGluc2VydCcpO1xuICAgIH1cbiAgICAvLyBDaGVjayBhbGwgdGhlIGluc2VydGVkIHZpZXcgYXJlIGNvcnJlY3RcbiAgICBmb3IgKGNvbnN0IHZpZXcgb2Ygdmlld0NvbnRyb2xsZXJzKSB7XG4gICAgICB2aWV3LmRlbGVnYXRlID0gdGkub3B0cy5kZWxlZ2F0ZTtcbiAgICAgIGNvbnN0IG5hdiA9IHZpZXcubmF2O1xuICAgICAgaWYgKG5hdiAmJiBuYXYgIT09IHRoaXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnNlcnRlZCB2aWV3IHdhcyBhbHJlYWR5IGluc2VydGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodmlldy5zdGF0ZSA9PT0gVklFV19TVEFURV9ERVNUUk9ZRUQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnNlcnRlZCB2aWV3IHdhcyBhbHJlYWR5IGRlc3Ryb3llZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aS5pbnNlcnRWaWV3cyA9IHZpZXdDb250cm9sbGVycztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmlldyB0aGF0IHdpbGwgYmUgZW50ZXJlZCBjb25zaWRlcmluZyB0aGUgdHJhbnNpdGlvbiBpbnN0cnVjdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB0aSBUaGUgaW5zdHJ1Y3Rpb25zLlxuICAgKiBAcGFyYW0gbGVhdmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgbGVmdCBvciB1bmRlZmluZWQgaWYgbm9uZS5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHZpZXcgdGhhdCB3aWxsIGJlIGVudGVyZWQsIHVuZGVmaW5lZCBpZiBub25lLlxuICAgKi9cbiAgZ2V0RW50ZXJpbmdWaWV3KHRpLCBsZWF2aW5nVmlldykge1xuICAgIC8vIFRoZSBsYXN0IGluc2VydGVkIHZpZXcgd2lsbCBiZSBlbnRlcmVkIHdoZW4gdmlldyBhcmUgaW5zZXJ0ZWQuXG4gICAgY29uc3QgaW5zZXJ0Vmlld3MgPSB0aS5pbnNlcnRWaWV3cztcbiAgICBpZiAoaW5zZXJ0Vmlld3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGluc2VydFZpZXdzW2luc2VydFZpZXdzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICAvLyBXaGVuIHZpZXdzIGFyZSBkZWxldGVkLCB3ZSB3aWxsIGVudGVyIHRoZSBsYXN0IHZpZXcgdGhhdCBpcyBub3QgcmVtb3ZlZCBhbmQgbm90IHRoZSB2aWV3IGJlaW5nIGxlZnQuXG4gICAgY29uc3QgcmVtb3ZlU3RhcnQgPSB0aS5yZW1vdmVTdGFydDtcbiAgICBpZiAocmVtb3ZlU3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgY29uc3QgcmVtb3ZlRW5kID0gcmVtb3ZlU3RhcnQgKyB0aS5yZW1vdmVDb3VudDtcbiAgICAgIGZvciAobGV0IGkgPSB2aWV3cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgIGlmICgoaSA8IHJlbW92ZVN0YXJ0IHx8IGkgPj0gcmVtb3ZlRW5kKSAmJiB2aWV3ICE9PSBsZWF2aW5nVmlldykge1xuICAgICAgICAgIHJldHVybiB2aWV3O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYW5kIFJlbW92ZXMgdGhlIHZpZXdzIGZyb20gdGhlIG5hdmlnYXRpb24gc3RhY2suXG4gICAqXG4gICAqIEBwYXJhbSBlbnRlcmluZ1ZpZXcgVGhlIHZpZXcgYmVpbmcgZW50ZXJlZC5cbiAgICogQHBhcmFtIGxlYXZpbmdWaWV3IFRoZSB2aWV3IGJlaW5nIGxlZnQuXG4gICAqIEBwYXJhbSB0aSBUaGUgaW5zdHJ1Y3Rpb25zLlxuICAgKi9cbiAgcG9zdFZpZXdJbml0KGVudGVyaW5nVmlldywgbGVhdmluZ1ZpZXcsIHRpKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgYXNzZXJ0KGxlYXZpbmdWaWV3IHx8IGVudGVyaW5nVmlldywgJ0JvdGggbGVhdmluZ1ZpZXcgYW5kIGVudGVyaW5nVmlldyBhcmUgbnVsbCcpO1xuICAgIGFzc2VydCh0aS5yZXNvbHZlLCAncmVzb2x2ZSBtdXN0IGJlIHZhbGlkJyk7XG4gICAgYXNzZXJ0KHRpLnJlamVjdCwgJ3JlamVjdCBtdXN0IGJlIHZhbGlkJyk7XG4gICAgLy8gQ29tcHV0ZSB0aGUgdmlld3MgdG8gcmVtb3ZlLlxuICAgIGNvbnN0IG9wdHMgPSB0aS5vcHRzO1xuICAgIGNvbnN0IHsgaW5zZXJ0Vmlld3MsIHJlbW92ZVN0YXJ0LCByZW1vdmVDb3VudCB9ID0gdGk7XG4gICAgLyoqIFJlY29yZHMgdGhlIHZpZXcgdG8gZGVzdHJveSAqL1xuICAgIGxldCBkZXN0cm95UXVldWU7XG4gICAgLy8gdGhlcmUgYXJlIHZpZXdzIHRvIHJlbW92ZVxuICAgIGlmIChyZW1vdmVTdGFydCAhPT0gdW5kZWZpbmVkICYmIHJlbW92ZUNvdW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGFzc2VydChyZW1vdmVTdGFydCA+PSAwLCAncmVtb3ZlU3RhcnQgY2FuIG5vdCBiZSBuZWdhdGl2ZScpO1xuICAgICAgYXNzZXJ0KHJlbW92ZUNvdW50ID49IDAsICdyZW1vdmVDb3VudCBjYW4gbm90IGJlIG5lZ2F0aXZlJyk7XG4gICAgICBkZXN0cm95UXVldWUgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSByZW1vdmVTdGFydDsgaSA8IHJlbW92ZVN0YXJ0ICsgcmVtb3ZlQ291bnQ7IGkrKykge1xuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3c1tpXTtcbiAgICAgICAgaWYgKHZpZXcgIT09IHVuZGVmaW5lZCAmJiB2aWV3ICE9PSBlbnRlcmluZ1ZpZXcgJiYgdmlldyAhPT0gbGVhdmluZ1ZpZXcpIHtcbiAgICAgICAgICBkZXN0cm95UXVldWUucHVzaCh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZGVmYXVsdCB0aGUgZGlyZWN0aW9uIHRvIFwiYmFja1wiXG4gICAgICAoX2EgPSBvcHRzLmRpcmVjdGlvbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKG9wdHMuZGlyZWN0aW9uID0gJ2JhY2snKTtcbiAgICB9XG4gICAgY29uc3QgZmluYWxOdW1WaWV3cyA9IHRoaXMudmlld3MubGVuZ3RoICsgKChfYiA9IGluc2VydFZpZXdzID09PSBudWxsIHx8IGluc2VydFZpZXdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbnNlcnRWaWV3cy5sZW5ndGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDApIC0gKHJlbW92ZUNvdW50ICE9PSBudWxsICYmIHJlbW92ZUNvdW50ICE9PSB2b2lkIDAgPyByZW1vdmVDb3VudCA6IDApO1xuICAgIGFzc2VydChmaW5hbE51bVZpZXdzID49IDAsICdmaW5hbCBiYWxhbmNlIGNhbiBub3QgYmUgbmVnYXRpdmUnKTtcbiAgICBpZiAoZmluYWxOdW1WaWV3cyA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKGBZb3UgY2FuJ3QgcmVtb3ZlIGFsbCB0aGUgcGFnZXMgaW4gdGhlIG5hdmlnYXRpb24gc3RhY2suIG5hdi5wb3AoKSBpcyBwcm9iYWJseSBjYWxsZWQgdG9vIG1hbnkgdGltZXMuYCwgdGhpcywgdGhpcy5lbCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25hdmlnYXRpb24gc3RhY2sgbmVlZHMgYXQgbGVhc3Qgb25lIHJvb3QgcGFnZScpO1xuICAgIH1cbiAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSB0cmFuc2l0aW9uIGNhbiBub3QgYmUgcmVqZWN0ZWQsIGFueSB0aHJvdyBzaG91bGQgYmUgYW4gZXJyb3JcbiAgICAvLyBJbnNlcnQgdGhlIG5ldyB2aWV3cyBpbiB0aGUgc3RhY2suXG4gICAgaWYgKGluc2VydFZpZXdzKSB7XG4gICAgICAvLyBhZGQgdGhlIHZpZXdzIHRvIHRoZVxuICAgICAgbGV0IGluc2VydEluZGV4ID0gdGkuaW5zZXJ0U3RhcnQ7XG4gICAgICBmb3IgKGNvbnN0IHZpZXcgb2YgaW5zZXJ0Vmlld3MpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRWaWV3QXQodmlldywgaW5zZXJ0SW5kZXgpO1xuICAgICAgICBpbnNlcnRJbmRleCsrO1xuICAgICAgfVxuICAgICAgaWYgKHRpLmVudGVyaW5nUmVxdWlyZXNUcmFuc2l0aW9uKSB7XG4gICAgICAgIC8vIGRlZmF1bHQgdG8gZm9yd2FyZCBpZiBub3QgYWxyZWFkeSBzZXRcbiAgICAgICAgKF9jID0gb3B0cy5kaXJlY3Rpb24pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IChvcHRzLmRpcmVjdGlvbiA9ICdmb3J3YXJkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmIHRoZSB2aWV3cyB0byBiZSByZW1vdmVkIGFyZSBpbiB0aGUgYmVnaW5uaW5nIG9yIG1pZGRsZVxuICAgIC8vIGFuZCB0aGVyZSBpcyBub3QgYSB2aWV3IHRoYXQgbmVlZHMgdG8gdmlzdWFsbHkgdHJhbnNpdGlvbiBvdXRcbiAgICAvLyB0aGVuIGp1c3QgZGVzdHJveSB0aGVtIGFuZCBkb24ndCB0cmFuc2l0aW9uIGFueXRoaW5nXG4gICAgLy8gYmF0Y2ggYWxsIG9mIGxpZmVjeWNsZXMgdG9nZXRoZXJcbiAgICAvLyBsZXQncyBtYWtlIHN1cmUsIGNhbGxiYWNrcyBhcmUgem9uZWRcbiAgICBpZiAoZGVzdHJveVF1ZXVlICYmIGRlc3Ryb3lRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHZpZXcgb2YgZGVzdHJveVF1ZXVlKSB7XG4gICAgICAgIGxpZmVjeWNsZSh2aWV3LmVsZW1lbnQsIExJRkVDWUNMRV9XSUxMX0xFQVZFKTtcbiAgICAgICAgbGlmZWN5Y2xlKHZpZXcuZWxlbWVudCwgTElGRUNZQ0xFX0RJRF9MRUFWRSk7XG4gICAgICAgIGxpZmVjeWNsZSh2aWV3LmVsZW1lbnQsIExJRkVDWUNMRV9XSUxMX1VOTE9BRCk7XG4gICAgICB9XG4gICAgICAvLyBvbmNlIGFsbCBsaWZlY3ljbGUgZXZlbnRzIGhhcyBiZWVuIGRlbGl2ZXJlZCwgd2UgY2FuIHNhZmVseSBkZXRyb3kgdGhlIHZpZXdzXG4gICAgICBmb3IgKGNvbnN0IHZpZXcgb2YgZGVzdHJveVF1ZXVlKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveVZpZXcodmlldyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIHRyYW5zaXRpb24oZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgdGkpIHtcbiAgICAvLyB3ZSBzaG91bGQgYW5pbWF0ZSAoZHVyYXRpb24gPiAwKSBpZiB0aGUgcHVzaGVkIHBhZ2UgaXMgbm90IHRoZSBmaXJzdCBvbmUgKHN0YXJ0dXApXG4gICAgLy8gb3IgaWYgaXQgaXMgYSBwb3J0YWwgKG1vZGFsLCBhY3Rpb25zaGVldCwgZXRjLilcbiAgICBjb25zdCBvcHRzID0gdGkub3B0cztcbiAgICBjb25zdCBwcm9ncmVzc0NhbGxiYWNrID0gb3B0cy5wcm9ncmVzc0FuaW1hdGlvbiA/IChhbmkpID0+ICh0aGlzLnNiQW5pID0gYW5pKSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICBjb25zdCBlbnRlcmluZ0VsID0gZW50ZXJpbmdWaWV3LmVsZW1lbnQ7XG4gICAgY29uc3QgbGVhdmluZ0VsID0gbGVhdmluZ1ZpZXcgJiYgbGVhdmluZ1ZpZXcuZWxlbWVudDtcbiAgICBjb25zdCBhbmltYXRpb25PcHRzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgbW9kZSwgc2hvd0dvQmFjazogdGhpcy5jYW5Hb0JhY2tTeW5jKGVudGVyaW5nVmlldyksIGJhc2VFbDogdGhpcy5lbCwgcHJvZ3Jlc3NDYWxsYmFjaywgYW5pbWF0ZWQ6IHRoaXMuYW5pbWF0ZWQgJiYgY29uZmlnLmdldEJvb2xlYW4oJ2FuaW1hdGVkJywgdHJ1ZSksIGVudGVyaW5nRWwsXG4gICAgICBsZWF2aW5nRWwgfSwgb3B0cyksIHsgYW5pbWF0aW9uQnVpbGRlcjogb3B0cy5hbmltYXRpb25CdWlsZGVyIHx8IHRoaXMuYW5pbWF0aW9uIHx8IGNvbmZpZy5nZXQoJ25hdkFuaW1hdGlvbicpIH0pO1xuICAgIGNvbnN0IHsgaGFzQ29tcGxldGVkIH0gPSBhd2FpdCB0cmFuc2l0aW9uKGFuaW1hdGlvbk9wdHMpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25GaW5pc2goaGFzQ29tcGxldGVkLCBlbnRlcmluZ1ZpZXcsIGxlYXZpbmdWaWV3LCBvcHRzKTtcbiAgfVxuICB0cmFuc2l0aW9uRmluaXNoKGhhc0NvbXBsZXRlZCwgZW50ZXJpbmdWaWV3LCBsZWF2aW5nVmlldywgb3B0cykge1xuICAgIC8qKlxuICAgICAqIElmIHRoZSB0cmFuc2l0aW9uIGRpZCBub3QgY29tcGxldGUsIHRoZSBsZWF2aW5nVmlldyB3aWxsIHN0aWxsIGJlIHRoZSBhY3RpdmVcbiAgICAgKiB2aWV3IG9uIHRoZSBzdGFjay4gT3RoZXJ3aXNlIHVubW91bnQgYWxsIHRoZSB2aWV3cyBhZnRlciB0aGUgZW50ZXJpbmdWaWV3LlxuICAgICAqL1xuICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSBoYXNDb21wbGV0ZWQgPyBlbnRlcmluZ1ZpZXcgOiBsZWF2aW5nVmlldztcbiAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgdGhpcy51bm1vdW50SW5hY3RpdmVWaWV3cyhhY3RpdmVWaWV3KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc0NvbXBsZXRlZCxcbiAgICAgIHJlcXVpcmVzVHJhbnNpdGlvbjogdHJ1ZSxcbiAgICAgIGVudGVyaW5nVmlldyxcbiAgICAgIGxlYXZpbmdWaWV3LFxuICAgICAgZGlyZWN0aW9uOiBvcHRzLmRpcmVjdGlvbixcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgdmlldyBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgKlxuICAgKiBXaGVuIHRoZSB2aWV3IGFscmVhZHkgaXMgaW4gdGhlIHN0YWNrIGl0IHdpbGwgYmUgbW92ZWQgdG8gdGhlIG5ldyBwb3NpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHZpZXcgVGhlIHZpZXcgdG8gaW5zZXJ0LlxuICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IHdoZXJlIHRvIGluc2VydCB0aGUgdmlldy5cbiAgICovXG4gIGluc2VydFZpZXdBdCh2aWV3LCBpbmRleCkge1xuICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gdmlld3MuaW5kZXhPZih2aWV3KTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCA+IC0xKSB7XG4gICAgICBhc3NlcnQodmlldy5uYXYgPT09IHRoaXMsICd2aWV3IGlzIG5vdCBwYXJ0IG9mIHRoZSBuYXYnKTtcbiAgICAgIC8vIFRoZSB2aWV3IGFscmVhZHkgaW4gdGhlIHN0YWNrLCByZW1vdmVzIGl0LlxuICAgICAgdmlld3Muc3BsaWNlKGV4aXN0aW5nSW5kZXgsIDEpO1xuICAgICAgLy8gYW5kIGFkZCBpdCBiYWNrIGF0IHRoZSByZXF1ZXN0ZWQgaW5kZXguXG4gICAgICB2aWV3cy5zcGxpY2UoaW5kZXgsIDAsIHZpZXcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGFzc2VydCghdmlldy5uYXYsICduYXYgaXMgdXNlZCcpO1xuICAgICAgLy8gdGhpcyBpcyBhIG5ldyB2aWV3IHRvIGFkZCB0byB0aGUgc3RhY2tcbiAgICAgIC8vIGNyZWF0ZSB0aGUgbmV3IGVudGVyaW5nIHZpZXdcbiAgICAgIHZpZXcubmF2ID0gdGhpcztcbiAgICAgIHZpZXdzLnNwbGljZShpbmRleCwgMCwgdmlldyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgdmlldyBmcm9tIHRoZSBzdGFjay5cbiAgICpcbiAgICogQHBhcmFtIHZpZXcgVGhlIHZpZXcgdG8gcmVtb3ZlLlxuICAgKi9cbiAgcmVtb3ZlVmlldyh2aWV3KSB7XG4gICAgYXNzZXJ0KHZpZXcuc3RhdGUgPT09IFZJRVdfU1RBVEVfQVRUQUNIRUQgfHwgdmlldy5zdGF0ZSA9PT0gVklFV19TVEFURV9ERVNUUk9ZRUQsICd2aWV3IHN0YXRlIHNob3VsZCBiZSBsb2FkZWQgb3IgZGVzdHJveWVkJyk7XG4gICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgIGNvbnN0IGluZGV4ID0gdmlld3MuaW5kZXhPZih2aWV3KTtcbiAgICBhc3NlcnQoaW5kZXggPiAtMSwgJ3ZpZXcgbXVzdCBiZSBwYXJ0IG9mIHRoZSBzdGFjaycpO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICB2aWV3cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuICBkZXN0cm95Vmlldyh2aWV3KSB7XG4gICAgdmlldy5fZGVzdHJveSgpO1xuICAgIHRoaXMucmVtb3ZlVmlldyh2aWV3KTtcbiAgfVxuICAvKipcbiAgICogVW5tb3VudHMgYWxsIGluYWN0aXZlIHZpZXdzIGFmdGVyIHRoZSBzcGVjaWZpZWQgYWN0aXZlIHZpZXcuXG4gICAqXG4gICAqIERPTSBXUklURVxuICAgKlxuICAgKiBAcGFyYW0gYWN0aXZlVmlldyBUaGUgdmlldyB0aGF0IGlzIGFjdGl2ZWx5IHZpc2libGUgaW4gdGhlIHN0YWNrLiBVc2VkIHRvIGNhbGN1bGF0ZSB3aGljaCB2aWV3cyB0byB1bm1vdW50LlxuICAgKi9cbiAgdW5tb3VudEluYWN0aXZlVmlld3MoYWN0aXZlVmlldykge1xuICAgIC8vIG9rLCBjbGVhbnVwIHRpbWUhISBEZXN0cm95IGFsbCBvZiB0aGUgdmlld3MgdGhhdCBhcmVcbiAgICAvLyBJTkFDVElWRSBhbmQgY29tZSBhZnRlciB0aGUgYWN0aXZlIHZpZXdcbiAgICAvLyBvbmx5IGRvIHRoaXMgaWYgdGhlIHZpZXdzIGV4aXN0LCB0aG91Z2hcbiAgICBpZiAodGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgIGNvbnN0IGFjdGl2ZVZpZXdJbmRleCA9IHZpZXdzLmluZGV4T2YoYWN0aXZlVmlldyk7XG4gICAgZm9yIChsZXQgaSA9IHZpZXdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCB2aWV3ID0gdmlld3NbaV07XG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gaW5zZXJ0aW5nIG11bHRpcGxlIHZpZXdzIHZpYSBpbnNlcnRQYWdlc1xuICAgICAgICogdGhlIGxhc3QgcGFnZSB3aWxsIGJlIHRyYW5zaXRpb25lZCB0bywgYnV0IHRoZVxuICAgICAgICogb3RoZXJzIHdpbGwgbm90IGJlLiBBcyBhIHJlc3VsdCwgYSBET00gZWxlbWVudFxuICAgICAgICogd2lsbCBvbmx5IGJlIGNyZWF0ZWQgZm9yIHRoZSBsYXN0IHBhZ2UgaW5zZXJ0ZWQuXG4gICAgICAgKiBBcyBhIHJlc3VsdCwgaXQgaXMgcG9zc2libGUgdG8gaGF2ZSB2aWV3cyBpbiB0aGVcbiAgICAgICAqIHN0YWNrIHRoYXQgZG8gbm90IGhhdmUgYHZpZXcuZWxlbWVudGAgeWV0LlxuICAgICAgICovXG4gICAgICBjb25zdCBlbGVtZW50ID0gdmlldy5lbGVtZW50O1xuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGkgPiBhY3RpdmVWaWV3SW5kZXgpIHtcbiAgICAgICAgICAvLyB0aGlzIHZpZXcgY29tZXMgYWZ0ZXIgdGhlIGFjdGl2ZSB2aWV3XG4gICAgICAgICAgLy8gbGV0J3MgdW5sb2FkIGl0XG4gICAgICAgICAgbGlmZWN5Y2xlKGVsZW1lbnQsIExJRkVDWUNMRV9XSUxMX1VOTE9BRCk7XG4gICAgICAgICAgdGhpcy5kZXN0cm95Vmlldyh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpIDwgYWN0aXZlVmlld0luZGV4KSB7XG4gICAgICAgICAgLy8gdGhpcyB2aWV3IGNvbWVzIGJlZm9yZSB0aGUgYWN0aXZlIHZpZXdcbiAgICAgICAgICAvLyBhbmQgaXQgaXMgbm90IGEgcG9ydGFsIHRoZW4gZW5zdXJlIGl0IGlzIGhpZGRlblxuICAgICAgICAgIHNldFBhZ2VIaWRkZW4oZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY2FuU3RhcnQoKSB7XG4gICAgcmV0dXJuICghIXRoaXMuc3dpcGVHZXN0dXJlICYmXG4gICAgICAhdGhpcy5pc1RyYW5zaXRpb25pbmcgJiZcbiAgICAgIHRoaXMudHJhbnNJbnN0ci5sZW5ndGggPT09IDAgJiZcbiAgICAgIHRoaXMuYW5pbWF0aW9uRW5hYmxlZCAmJlxuICAgICAgdGhpcy5jYW5Hb0JhY2tTeW5jKCkpO1xuICB9XG4gIG9uU3RhcnQoKSB7XG4gICAgdGhpcy5wb3AoeyBkaXJlY3Rpb246ICdiYWNrJywgcHJvZ3Jlc3NBbmltYXRpb246IHRydWUgfSk7XG4gIH1cbiAgb25Nb3ZlKHN0ZXBWYWx1ZSkge1xuICAgIGlmICh0aGlzLnNiQW5pKSB7XG4gICAgICB0aGlzLnNiQW5pLnByb2dyZXNzU3RlcChzdGVwVmFsdWUpO1xuICAgIH1cbiAgfVxuICBvbkVuZChzaG91bGRDb21wbGV0ZSwgc3RlcFZhbHVlLCBkdXIpIHtcbiAgICBpZiAodGhpcy5zYkFuaSkge1xuICAgICAgdGhpcy5hbmltYXRpb25FbmFibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNiQW5pLm9uRmluaXNoKCgpID0+IHtcbiAgICAgICAgdGhpcy5hbmltYXRpb25FbmFibGVkID0gdHJ1ZTtcbiAgICAgIH0sIHsgb25lVGltZUNhbGxiYWNrOiB0cnVlIH0pO1xuICAgICAgLy8gQWNjb3VudCBmb3Igcm91bmRpbmcgZXJyb3JzIGluIEpTXG4gICAgICBsZXQgbmV3U3RlcFZhbHVlID0gc2hvdWxkQ29tcGxldGUgPyAtMC4wMDEgOiAwLjAwMTtcbiAgICAgIC8qKlxuICAgICAgICogQW5pbWF0aW9uIHdpbGwgYmUgcmV2ZXJzZWQgaGVyZSwgc28gbmVlZCB0b1xuICAgICAgICogcmV2ZXJzZSB0aGUgZWFzaW5nIGN1cnZlIGFzIHdlbGxcbiAgICAgICAqXG4gICAgICAgKiBBZGRpdGlvbmFsbHksIHdlIG5lZWQgdG8gYWNjb3VudCBmb3IgdGhlIHRpbWUgcmVsYXRpdmVcbiAgICAgICAqIHRvIHRoZSBuZXcgZWFzaW5nIGN1cnZlLCBhcyBgc3RlcFZhbHVlYCBpcyBnb2luZyB0byBiZSBnaXZlblxuICAgICAgICogaW4gdGVybXMgb2YgYSBsaW5lYXIgY3VydmUuXG4gICAgICAgKi9cbiAgICAgIGlmICghc2hvdWxkQ29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5zYkFuaS5lYXNpbmcoJ2N1YmljLWJlemllcigxLCAwLCAwLjY4LCAwLjI4KScpO1xuICAgICAgICBuZXdTdGVwVmFsdWUgKz0gZ2V0VGltZUdpdmVuUHJvZ3Jlc3Npb24oWzAsIDBdLCBbMSwgMF0sIFswLjY4LCAwLjI4XSwgWzEsIDFdLCBzdGVwVmFsdWUpWzBdO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5ld1N0ZXBWYWx1ZSArPSBnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbihbMCwgMF0sIFswLjMyLCAwLjcyXSwgWzAsIDFdLCBbMSwgMV0sIHN0ZXBWYWx1ZSlbMF07XG4gICAgICB9XG4gICAgICB0aGlzLnNiQW5pLnByb2dyZXNzRW5kKHNob3VsZENvbXBsZXRlID8gMSA6IDAsIG5ld1N0ZXBWYWx1ZSwgZHVyKTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBoKFwic2xvdFwiLCBudWxsKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJzd2lwZUdlc3R1cmVcIjogW1wic3dpcGVHZXN0dXJlQ2hhbmdlZFwiXSxcbiAgICBcInJvb3RcIjogW1wicm9vdENoYW5nZWRcIl1cbiAgfTsgfVxufTtcbk5hdi5zdHlsZSA9IG5hdkNzcztcblxuY29uc3QgbmF2TGluayA9IChlbCwgcm91dGVyRGlyZWN0aW9uLCBjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCByb3V0ZXJBbmltYXRpb24pID0+IHtcbiAgY29uc3QgbmF2ID0gZWwuY2xvc2VzdCgnaW9uLW5hdicpO1xuICBpZiAobmF2KSB7XG4gICAgaWYgKHJvdXRlckRpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnKSB7XG4gICAgICBpZiAoY29tcG9uZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG5hdi5wdXNoKGNvbXBvbmVudCwgY29tcG9uZW50UHJvcHMsIHsgc2tpcElmQnVzeTogdHJ1ZSwgYW5pbWF0aW9uQnVpbGRlcjogcm91dGVyQW5pbWF0aW9uIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChyb3V0ZXJEaXJlY3Rpb24gPT09ICdyb290Jykge1xuICAgICAgaWYgKGNvbXBvbmVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBuYXYuc2V0Um9vdChjb21wb25lbnQsIGNvbXBvbmVudFByb3BzLCB7IHNraXBJZkJ1c3k6IHRydWUsIGFuaW1hdGlvbkJ1aWxkZXI6IHJvdXRlckFuaW1hdGlvbiB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocm91dGVyRGlyZWN0aW9uID09PSAnYmFjaycpIHtcbiAgICAgIHJldHVybiBuYXYucG9wKHsgc2tpcElmQnVzeTogdHJ1ZSwgYW5pbWF0aW9uQnVpbGRlcjogcm91dGVyQW5pbWF0aW9uIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbn07XG5cbmNvbnN0IE5hdkxpbmsgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMub25DbGljayA9ICgpID0+IHtcbiAgICAgIHJldHVybiBuYXZMaW5rKHRoaXMuZWwsIHRoaXMucm91dGVyRGlyZWN0aW9uLCB0aGlzLmNvbXBvbmVudCwgdGhpcy5jb21wb25lbnRQcm9wcywgdGhpcy5yb3V0ZXJBbmltYXRpb24pO1xuICAgIH07XG4gICAgdGhpcy5jb21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5jb21wb25lbnRQcm9wcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnJvdXRlckRpcmVjdGlvbiA9ICdmb3J3YXJkJztcbiAgICB0aGlzLnJvdXRlckFuaW1hdGlvbiA9IHVuZGVmaW5lZDtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGgoSG9zdCwgeyBvbkNsaWNrOiB0aGlzLm9uQ2xpY2sgfSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblxuZXhwb3J0IHsgTmF2IGFzIGlvbl9uYXYsIE5hdkxpbmsgYXMgaW9uX25hdl9saW5rIH07XG4iXSwibmFtZXMiOlsiciIsInJlZ2lzdGVySW5zdGFuY2UiLCJkIiwiY3JlYXRlRXZlbnQiLCJoIiwiZiIsImdldEVsZW1lbnQiLCJIIiwiSG9zdCIsImIiLCJnZXRJb25Nb2RlIiwiYyIsImNvbmZpZyIsImciLCJnZXRUaW1lR2l2ZW5Qcm9ncmVzc2lvbiIsIm8iLCJhc3NlcnQiLCJzIiwic2hhbGxvd0VxdWFsU3RyaW5nTWFwIiwibCIsImxpZmVjeWNsZSIsInQiLCJ0cmFuc2l0aW9uIiwic2V0UGFnZUhpZGRlbiIsIkxJRkVDWUNMRV9XSUxMX1VOTE9BRCIsIkxJRkVDWUNMRV9XSUxMX0xFQVZFIiwiTElGRUNZQ0xFX0RJRF9MRUFWRSIsImEiLCJhdHRhY2hDb21wb25lbnQiLCJWSUVXX1NUQVRFX05FVyIsIlZJRVdfU1RBVEVfQVRUQUNIRUQiLCJWSUVXX1NUQVRFX0RFU1RST1lFRCIsIlZpZXdDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJjb21wb25lbnQiLCJwYXJhbXMiLCJzdGF0ZSIsImluaXQiLCJjb250YWluZXIiLCJfdGhpcyIsIl9hc3luY1RvR2VuZXJhdG9yIiwiZWxlbWVudCIsImRlbGVnYXRlIiwiX2Rlc3Ryb3kiLCJyZW1vdmVWaWV3RnJvbURvbSIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmUiLCJuYXYiLCJ1bmRlZmluZWQiLCJtYXRjaGVzIiwidmlldyIsImlkIiwiY29udmVydFRvVmlldyIsInBhZ2UiLCJjb252ZXJ0VG9WaWV3cyIsInBhZ2VzIiwibWFwIiwiY29tcG9uZW50UHJvcHMiLCJmaWx0ZXIiLCJ2IiwibmF2Q3NzIiwiTmF2IiwiaG9zdFJlZiIsImlvbk5hdldpbGxMb2FkIiwiaW9uTmF2V2lsbENoYW5nZSIsImlvbk5hdkRpZENoYW5nZSIsInRyYW5zSW5zdHIiLCJhbmltYXRpb25FbmFibGVkIiwidXNlUm91dGVyIiwiaXNUcmFuc2l0aW9uaW5nIiwiZGVzdHJveWVkIiwidmlld3MiLCJzd2lwZUdlc3R1cmUiLCJhbmltYXRlZCIsImFuaW1hdGlvbiIsInJvb3RQYXJhbXMiLCJyb290Iiwic3dpcGVHZXN0dXJlQ2hhbmdlZCIsImdlc3R1cmUiLCJlbmFibGUiLCJyb290Q2hhbmdlZCIsInNldFJvb3QiLCJjb21wb25lbnRXaWxsTG9hZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVsIiwiY2xvc2VzdCIsIm1vZGUiLCJnZXRCb29sZWFuIiwiZW1pdCIsImNvbXBvbmVudERpZExvYWQiLCJfdGhpczIiLCJjcmVhdGVTd2lwZUJhY2tHZXN0dXJlIiwiY2FuU3RhcnQiLCJiaW5kIiwib25TdGFydCIsIm9uTW92ZSIsIm9uRW5kIiwiY29ubmVjdGVkQ2FsbGJhY2siLCJkaXNjb25uZWN0ZWRDYWxsYmFjayIsImRlc3Ryb3kiLCJsZW5ndGgiLCJwdXNoIiwib3B0cyIsImRvbmUiLCJpbnNlcnQiLCJpbnNlcnRJbmRleCIsImluc2VydFBhZ2VzIiwiaW5zZXJ0Q29tcG9uZW50cyIsInF1ZXVlVHJucyIsImluc2VydFN0YXJ0IiwiaW5zZXJ0Vmlld3MiLCJwb3AiLCJyZW1vdmVJbmRleCIsInBvcFRvIiwiaW5kZXhPclZpZXdDdHJsIiwidGkiLCJyZW1vdmVTdGFydCIsInJlbW92ZUNvdW50IiwicmVtb3ZlVmlldyIsInBvcFRvUm9vdCIsInN0YXJ0SW5kZXgiLCJzZXRQYWdlcyIsInNldFJvdXRlSWQiLCJkaXJlY3Rpb24iLCJhY3RpdmUiLCJnZXRBY3RpdmVTeW5jIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjaGFuZ2VkIiwicHJvbWlzZSIsImZpbmlzaCIsImNvbW1vbk9wdHMiLCJ1cGRhdGVVUkwiLCJ2aWV3SXNSZWFkeSIsImVudGVyaW5nRWwiLCJtYXJrIiwicCIsIm1hcmtWaXNpYmxlIiwiX3JlZiIsImFwcGx5IiwiYXJndW1lbnRzIiwidmlld0NvbnRyb2xsZXIiLCJmaW5kIiwiT2JqZWN0IiwiYXNzaWduIiwiYW5pbWF0aW9uQnVpbGRlciIsImdldFJvdXRlSWQiLCJfdGhpczMiLCJ0YWdOYW1lIiwiZ2V0QWN0aXZlIiwiX3RoaXM0IiwiZ2V0QnlJbmRleCIsImluZGV4IiwiX3RoaXM1IiwiY2FuR29CYWNrIiwiX3RoaXM2IiwiY2FuR29CYWNrU3luYyIsImdldFByZXZpb3VzIiwiX3RoaXM3IiwiZ2V0UHJldmlvdXNTeW5jIiwiZ2V0TGVuZ3RoIiwiaW5kZXhPZiIsIl90aGlzOCIsIl9hIiwiX2IiLCJza2lwSWZCdXN5IiwicmVqZWN0Iiwicm91dGVyIiwiY2FuVHJhbnNpdGlvbiIsIm5leHRUcm5zIiwic3VjY2VzcyIsInJlc3VsdCIsImZpcmVFcnJvciIsImhhc0NvbXBsZXRlZCIsInJlcXVpcmVzVHJhbnNpdGlvbiIsImVudGVyaW5nVmlldyIsImxlYXZpbmdWaWV3IiwibmF2Q2hhbmdlZCIsImZhaWxlZCIsInJlamVjdFJlYXNvbiIsInNoaWZ0IiwicnVuVHJhbnNpdGlvbiIsIl90aGlzOSIsInByZXBhcmVUSSIsImdldEVudGVyaW5nVmlldyIsIkVycm9yIiwicG9zdFZpZXdJbml0IiwiZW50ZXJpbmdSZXF1aXJlc1RyYW5zaXRpb24iLCJsZWF2aW5nUmVxdWlyZXNUcmFuc2l0aW9uIiwiaXNCYWNrRGlyZWN0aW9uIiwiX2MiLCJ2aWV3c0xlbmd0aCIsInZpZXdDb250cm9sbGVycyIsInJlbW92ZUVuZCIsImkiLCJkZXN0cm95UXVldWUiLCJmaW5hbE51bVZpZXdzIiwiY29uc29sZSIsIndhcm4iLCJpbnNlcnRWaWV3QXQiLCJkZXN0cm95VmlldyIsIl90aGlzMTAiLCJwcm9ncmVzc0NhbGxiYWNrIiwicHJvZ3Jlc3NBbmltYXRpb24iLCJhbmkiLCJzYkFuaSIsImxlYXZpbmdFbCIsImFuaW1hdGlvbk9wdHMiLCJzaG93R29CYWNrIiwiYmFzZUVsIiwiZ2V0IiwidHJhbnNpdGlvbkZpbmlzaCIsImFjdGl2ZVZpZXciLCJ1bm1vdW50SW5hY3RpdmVWaWV3cyIsImV4aXN0aW5nSW5kZXgiLCJzcGxpY2UiLCJhY3RpdmVWaWV3SW5kZXgiLCJzdGVwVmFsdWUiLCJwcm9ncmVzc1N0ZXAiLCJzaG91bGRDb21wbGV0ZSIsImR1ciIsIm9uRmluaXNoIiwib25lVGltZUNhbGxiYWNrIiwibmV3U3RlcFZhbHVlIiwiZWFzaW5nIiwicHJvZ3Jlc3NFbmQiLCJyZW5kZXIiLCJ3YXRjaGVycyIsInN0eWxlIiwibmF2TGluayIsInJvdXRlckRpcmVjdGlvbiIsInJvdXRlckFuaW1hdGlvbiIsIk5hdkxpbmsiLCJvbkNsaWNrIiwiaW9uX25hdiIsImlvbl9uYXZfbGluayJdLCJzb3VyY2VSb290Ijoid2VicGFjazovLy8iLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMF19