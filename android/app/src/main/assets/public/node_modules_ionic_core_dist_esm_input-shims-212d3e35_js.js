"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-212d3e35_js"],{

/***/ 1719:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-212d3e35.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startInputShims": () => (/* binding */ startInputShims)
/* harmony export */ });
/* harmony import */ var _Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_455f6202_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-455f6202.js */ 5707);
/* harmony import */ var _helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-5eb6364d.js */ 9364);
/* harmony import */ var _index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-33ffec25.js */ 2286);
/* harmony import */ var _index_e86f0117_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-e86f0117.js */ 7584);

/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */




var KeyboardResize;
(function (KeyboardResize) {
  KeyboardResize["Body"] = "body";
  KeyboardResize["Ionic"] = "ionic";
  KeyboardResize["Native"] = "native";
  KeyboardResize["None"] = "none";
})(KeyboardResize || (KeyboardResize = {}));
const Keyboard = {
  getEngine() {
    var _a;
    return ((_a = _index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__.w === null || _index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__.w === void 0 ? void 0 : _index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__.w.Capacitor) === null || _a === void 0 ? void 0 : _a.isPluginAvailable('Keyboard')) && (_index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__.w === null || _index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__.w === void 0 ? void 0 : _index_33ffec25_js__WEBPACK_IMPORTED_MODULE_3__.w.Capacitor.Plugins.Keyboard);
  },
  getResizeMode() {
    const engine = this.getEngine();
    if (!engine || !engine.getResizeMode) {
      return Promise.resolve(undefined);
    }
    return engine.getResizeMode();
  }
};
const cloneMap = new WeakMap();
const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0, disabledClonedInput = false) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }
  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY, disabledClonedInput);
  } else {
    removeClone(componentEl, inputEl);
  }
};
// TODO(FW-2832): type
const isFocused = input => {
  return input === input.getRootNode().activeElement;
};
const addClone = (componentEl, inputEl, inputRelativeY, disabledClonedInput = false) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode;
  // DOM WRITES
  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  /**
   * Making the cloned input disabled prevents
   * Chrome for Android from still scrolling
   * the entire page since this cloned input
   * will briefly be hidden by the keyboard
   * even though it is not focused.
   *
   * This is not needed on iOS. While this
   * does not cause functional issues on iOS,
   * the input still appears slightly dimmed even
   * if we set opacity: 1.
   */
  if (disabledClonedInput) {
    clonedEl.disabled = true;
  }
  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};
const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);
  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }
  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};
/**
 * Factoring in 50px gives us some room
 * in case the keyboard shows password/autofill bars
 * asynchronously.
 */
const SCROLL_AMOUNT_PADDING = 50;
const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }
  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };
  const onBlur = () => relocateInput(componentEl, inputEl, false);
  const hideCaret = () => scrollHideCaret(true);
  const showCaret = () => scrollHideCaret(false);
  (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.removeEventListener('blur', onBlur);
  };
};
const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';
const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;
  const onScroll = () => {
    didScroll = true;
  };
  const onFocusin = () => {
    focused = true;
  };
  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }
    const active = doc.activeElement;
    if (!active) {
      return;
    }
    // only blur if the active element is a text-input or a textarea
    if (active.matches(SKIP_SELECTOR)) {
      return;
    }
    // if the selected target is the active element, do not blur
    const tapped = ev.target;
    if (tapped === active) {
      return;
    }
    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }
    focused = false;
    // TODO FW-2796: find a better way, why 50ms?
    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };
  (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};
const SCROLL_ASSIST_SPEED = 0.3;
const getScrollData = (componentEl, contentEl, keyboardHeight) => {
  var _a;
  const itemEl = (_a = componentEl.closest('ion-item,[ion-item]')) !== null && _a !== void 0 ? _a : componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight // TODO(FW-2832): type
  );
};

const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom;
  // compute visible area
  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight);
  // compute safe area
  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom - SCROLL_AMOUNT_PADDING;
  // figure out if each edge of the input is within the safe area
  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop;
  // desiredScrollAmount is the negated distance to the safe area according to our calculations.
  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0);
  // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area
  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};
const PADDING_TIMER_KEY = '$ionPaddingTimer';
/**
 * Scroll padding adds additional padding to the bottom
 * of ion-content so that there is enough scroll space
 * for an input to be scrolled above the keyboard. This
 * is needed in environments where the webview does not
 * resize when the keyboard opens.
 *
 * Example: If an input at the bottom of ion-content is
 * focused, there is no additional scrolling space below
 * it, so the input cannot be scrolled above the keyboard.
 * Scroll padding fixes this by adding padding equal to the
 * height of the keyboard to the bottom of the content.
 *
 * Common environments where this is needed:
 * - Mobile Safari: The keyboard overlays the content
 * - Capacitor/Cordova on iOS: The keyboard overlays the content
 * when the KeyboardResize mode is set to 'none'.
 */
const setScrollPadding = (contentEl, paddingAmount, clearCallback) => {
  const timer = contentEl[PADDING_TIMER_KEY];
  if (timer) {
    clearTimeout(timer);
  }
  if (paddingAmount > 0) {
    contentEl.style.setProperty('--keyboard-offset', `${paddingAmount}px`);
  } else {
    contentEl[PADDING_TIMER_KEY] = setTimeout(() => {
      contentEl.style.setProperty('--keyboard-offset', '0px');
      if (clearCallback) {
        clearCallback();
      }
    }, 120);
  }
};
/**
 * When an input is about to be focused,
 * set a timeout to clear any scroll padding
 * on the content. Note: The clearing
 * is done on a timeout so that if users
 * are moving focus from one input to the next
 * then re-adding scroll padding to the new
 * input with cancel the timeout to clear the
 * scroll padding.
 */
const setClearScrollPaddingListener = (inputEl, contentEl, doneCallback) => {
  const clearScrollPadding = () => {
    if (contentEl) {
      setScrollPadding(contentEl, 0, doneCallback);
    }
  };
  inputEl.addEventListener('focusout', clearScrollPadding, {
    once: true
  });
};
let currentPadding = 0;
const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight, enableScrollPadding, keyboardResize, disableClonedInput = false) => {
  /**
   * Scroll padding should only be added if:
   * 1. The global scrollPadding config option
   * is set to true.
   * 2. The native keyboard resize mode is either "none"
   * (keyboard overlays webview) or undefined (resize
   * information unavailable)
   * Resize info is available on Capacitor 4+
   */
  const addScrollPadding = enableScrollPadding && (keyboardResize === undefined || keyboardResize.mode === KeyboardResize.None);
  /**
   * When the input is about to receive
   * focus, we need to move it to prevent
   * mobile Safari from adjusting the viewport.
   */
  const focusIn = /*#__PURE__*/function () {
    var _ref = (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight, addScrollPadding, disableClonedInput);
    });
    return function focusIn() {
      return _ref.apply(this, arguments);
    };
  }();
  componentEl.addEventListener('focusin', focusIn, true);
  return () => {
    componentEl.removeEventListener('focusin', focusIn, true);
  };
};
const jsSetFocus = /*#__PURE__*/function () {
  var _ref2 = (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight, enableScrollPadding, disableClonedInput = false) {
    if (!contentEl && !footerEl) {
      return;
    }
    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);
    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      inputEl.focus();
      /**
       * Even though the input does not need
       * scroll assist, we should preserve the
       * the scroll padding as users could be moving
       * focus from an input that needs scroll padding
       * to an input that does not need scroll padding.
       * If we remove the scroll padding now, users will
       * see the page jump.
       */
      if (enableScrollPadding && contentEl !== null) {
        currentPadding += scrollData.scrollPadding;
        setScrollPadding(contentEl, currentPadding);
        setClearScrollPaddingListener(inputEl, contentEl, () => currentPadding = 0);
      }
      return;
    }
    // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus
    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY, disableClonedInput);
    inputEl.focus();
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */
    (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => componentEl.click());
    /**
     * If enabled, we can add scroll padding to
     * the bottom of the content so that scroll assist
     * has enough room to scroll the input above
     * the keyboard.
     */
    if (enableScrollPadding && contentEl) {
      currentPadding += scrollData.scrollPadding;
      setScrollPadding(contentEl, currentPadding);
    }
    if (typeof window !== 'undefined') {
      let scrollContentTimeout;
      const scrollContent = /*#__PURE__*/function () {
        var _ref3 = (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }
          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', scrollContent);
          // scroll the input into place
          if (contentEl) {
            yield (0,_index_455f6202_js__WEBPACK_IMPORTED_MODULE_1__.c)(contentEl, 0, scrollData.scrollAmount, scrollData.scrollDuration);
          }
          // the scroll view is in the correct position now
          // give the native text input focus
          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY);
          // ensure this is the focused input
          inputEl.focus();
          /**
           * When the input is about to be blurred
           * we should set a timeout to remove
           * any scroll padding.
           */
          if (enableScrollPadding) {
            setClearScrollPaddingListener(inputEl, contentEl, () => currentPadding = 0);
          }
        });
        return function scrollContent() {
          return _ref3.apply(this, arguments);
        };
      }();
      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', scrollContent);
      };
      if (contentEl) {
        const scrollEl = yield (0,_index_455f6202_js__WEBPACK_IMPORTED_MODULE_1__.g)(contentEl);
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */
        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;
        if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += SCROLL_AMOUNT_PADDING;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */
          scrollContentTimeout = setTimeout(scrollContent, 1000);
          return;
        }
      }
      scrollContent();
    }
  });
  return function jsSetFocus(_x, _x2, _x3, _x4, _x5, _x6) {
    return _ref2.apply(this, arguments);
  };
}();
const INPUT_BLURRING = true;
const startInputShims = /*#__PURE__*/function () {
  var _ref4 = (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (config, platform) {
    const doc = document;
    const isIOS = platform === 'ios';
    const isAndroid = platform === 'android';
    /**
     * Hide Caret and Input Blurring are needed on iOS.
     * Scroll Assist and Scroll Padding are needed on iOS and Android
     * with Chrome web browser (not Chrome webview).
     */
    const keyboardHeight = config.getNumber('keyboardHeight', 290);
    const scrollAssist = config.getBoolean('scrollAssist', true);
    const hideCaret = config.getBoolean('hideCaretOnScroll', isIOS);
    const inputBlurring = config.getBoolean('inputBlurring', isIOS);
    const scrollPadding = config.getBoolean('scrollPadding', true);
    const inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
    const hideCaretMap = new WeakMap();
    const scrollAssistMap = new WeakMap();
    /**
     * Grab the native keyboard resize configuration
     * and pass it to scroll assist. Scroll assist requires
     * that we adjust the input right before the input
     * is about to be focused. If we called `Keyboard.getResizeMode`
     * on focusin in scroll assist, we could potentially adjust the
     * input too late since this call is async.
     */
    const keyboardResizeMode = yield Keyboard.getResizeMode();
    const registerInput = /*#__PURE__*/function () {
      var _ref5 = (0,_Users_ohrionmartin_dev_mining_expo_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl) {
        yield new Promise(resolve => (0,_helpers_5eb6364d_js__WEBPACK_IMPORTED_MODULE_2__.c)(componentEl, resolve));
        const inputRoot = componentEl.shadowRoot || componentEl;
        const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
        const scrollEl = (0,_index_455f6202_js__WEBPACK_IMPORTED_MODULE_1__.f)(componentEl);
        const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;
        if (!inputEl) {
          return;
        }
        if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
          const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
          hideCaretMap.set(componentEl, rmFn);
        }
        /**
         * date/datetime-locale inputs on mobile devices show date picker
         * overlays instead of keyboards. As a result, scroll assist is
         * not needed. This also works around a bug in iOS <16 where
         * scroll assist causes the browser to lock up. See FW-1997.
         */
        const isDateInput = inputEl.type === 'date' || inputEl.type === 'datetime-local';
        if (!isDateInput && (!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
          const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight, scrollPadding, keyboardResizeMode, isAndroid);
          scrollAssistMap.set(componentEl, rmFn);
        }
      });
      return function registerInput(_x9) {
        return _ref5.apply(this, arguments);
      };
    }();
    const unregisterInput = componentEl => {
      if (hideCaret) {
        const fn = hideCaretMap.get(componentEl);
        if (fn) {
          fn();
        }
        hideCaretMap.delete(componentEl);
      }
      if (scrollAssist) {
        const fn = scrollAssistMap.get(componentEl);
        if (fn) {
          fn();
        }
        scrollAssistMap.delete(componentEl);
      }
    };
    if (inputBlurring && INPUT_BLURRING) {
      enableInputBlurring();
    }
    // Input might be already loaded in the DOM before ion-device-hacks did.
    // At this point we need to look for all of the inputs not registered yet
    // and register them.
    for (const input of inputs) {
      registerInput(input);
    }
    // TODO(FW-2832): types
    doc.addEventListener('ionInputDidLoad', ev => {
      registerInput(ev.detail);
    });
    doc.addEventListener('ionInputDidUnload', ev => {
      unregisterInput(ev.detail);
    });
  });
  return function startInputShims(_x7, _x8) {
    return _ref4.apply(this, arguments);
  };
}();


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtMjEyZDNlMzVfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUM0RztBQUNhO0FBQzFFO0FBQ2xCO0FBRTdCLElBQUllLGNBQWM7QUFDbEIsQ0FBQyxVQUFVQSxjQUFjLEVBQUU7RUFDekJBLGNBQWMsQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNO0VBQy9CQSxjQUFjLENBQUMsT0FBTyxDQUFDLEdBQUcsT0FBTztFQUNqQ0EsY0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLFFBQVE7RUFDbkNBLGNBQWMsQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNO0FBQ2pDLENBQUMsRUFBRUEsY0FBYyxLQUFLQSxjQUFjLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzQyxNQUFNQyxRQUFRLEdBQUc7RUFDZkMsU0FBU0EsQ0FBQSxFQUFHO0lBQ1YsSUFBSUMsRUFBRTtJQUNOLE9BQU8sQ0FBQyxDQUFDQSxFQUFFLEdBQUdKLGlEQUFHLEtBQUssSUFBSSxJQUFJQSxpREFBRyxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSwyREFBYSxNQUFNLElBQUksSUFBSUksRUFBRSxLQUFLLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxHQUFHQSxFQUFFLENBQUNFLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxNQUFNTixpREFBRyxLQUFLLElBQUksSUFBSUEsaURBQUcsS0FBSyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBR0EsNEVBQThCLENBQUM7RUFDN04sQ0FBQztFQUNEUSxhQUFhQSxDQUFBLEVBQUc7SUFDZCxNQUFNQyxNQUFNLEdBQUcsSUFBSSxDQUFDTixTQUFTLEVBQUU7SUFDL0IsSUFBSSxDQUFDTSxNQUFNLElBQUksQ0FBQ0EsTUFBTSxDQUFDRCxhQUFhLEVBQUU7TUFDcEMsT0FBT0UsT0FBTyxDQUFDQyxPQUFPLENBQUNDLFNB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TUFBTTZILEVBQUUsR0FBR1osWUFBWSxDQUFDMUgsR0FBRyxDQUFDOUIsV0FBVyxDQUFDO1FBQ3hDLElBQUlvSyxFQUFFLEVBQUU7VUFDTkEsRUFBRSxFQUFFO1FBQ047UUFDQVosWUFBWSxDQUFDekgsTUFBTSxDQUFDL0IsV0FBVyxDQUFDO01BQ2xDO01BQ0EsSUFBSWlKLFlBQVksRUFBRTtRQUNoQixNQUFNbUIsRUFBRSxHQUFHWCxlQUFlLENBQUMzSCxHQUFHLENBQUM5QixXQUFXLENBQUM7UUFDM0MsSUFBSW9LLEVBQUUsRUFBRTtVQUNOQSxFQUFFLEVBQUU7UUFDTjtRQUNBWCxlQUFlLENBQUMxSCxNQUFNLENBQUMvQixXQUFXLENBQUM7TUFDckM7SUFDRixDQUFDO0lBQ0QsSUFBSW1KLGFBQWEsSUFBSVYsY0FBYyxFQUFFO01BQ25DL0YsbUJBQW1CLEVBQUU7SUFDdkI7SUFDQTtJQUNBO0lBQ0E7SUFDQSxLQUFLLE1BQU1qQyxLQUFLLElBQUkySSxNQUFNLEVBQUU7TUFDMUJPLGFBQWEsQ0FBQ2xKLEtBQUssQ0FBQztJQUN0QjtJQUNBO0lBQ0FhLEdBQUcsQ0FBQzdDLGdCQUFnQixDQUFDLGlCQUFpQixFQUFJd0UsRUFBRSxJQUFLO01BQy9DMEcsYUFBYSxDQUFDMUcsRUFBRSxDQUFDb0gsTUFBTSxDQUFDO0lBQzFCLENBQUMsQ0FBRTtJQUNIL0ksR0FBRyxDQUFDN0MsZ0JBQWdCLENBQUMsbUJBQW1CLEVBQUl3RSxFQUFFLElBQUs7TUFDakRrSCxlQUFlLENBQUNsSCxFQUFFLENBQUNvSCxNQUFNLENBQUM7SUFDNUIsQ0FBQyxDQUFFO0VBQ0wsQ0FBQztFQUFBLGdCQXRGSzNCLGVBQWVBLENBQUE0QixHQUFBLEVBQUFDLEdBQUE7SUFBQSxPQUFBNUIsS0FBQSxDQUFBeEIsS0FBQSxPQUFBQyxTQUFBO0VBQUE7QUFBQSxHQXNGcEIiLCJzb3VyY2VzIjpbIi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lucHV0LXNoaW1zLTIxMmQzZTM1LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyBnIGFzIGdldFNjcm9sbEVsZW1lbnQsIGMgYXMgc2Nyb2xsQnlQb2ludCwgZiBhcyBmaW5kQ2xvc2VzdElvbkNvbnRlbnQgfSBmcm9tICcuL2luZGV4LTQ1NWY2MjAyLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCByIGFzIHJhZiwgYyBhcyBjb21wb25lbnRPblJlYWR5IH0gZnJvbSAnLi9oZWxwZXJzLTVlYjYzNjRkLmpzJztcbmltcG9ydCB7IHcgYXMgd2luIH0gZnJvbSAnLi9pbmRleC0zM2ZmZWMyNS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtZTg2ZjAxMTcuanMnO1xuXG52YXIgS2V5Ym9hcmRSZXNpemU7XG4oZnVuY3Rpb24gKEtleWJvYXJkUmVzaXplKSB7XG4gIEtleWJvYXJkUmVzaXplW1wiQm9keVwiXSA9IFwiYm9keVwiO1xuICBLZXlib2FyZFJlc2l6ZVtcIklvbmljXCJdID0gXCJpb25pY1wiO1xuICBLZXlib2FyZFJlc2l6ZVtcIk5hdGl2ZVwiXSA9IFwibmF0aXZlXCI7XG4gIEtleWJvYXJkUmVzaXplW1wiTm9uZVwiXSA9IFwibm9uZVwiO1xufSkoS2V5Ym9hcmRSZXNpemUgfHwgKEtleWJvYXJkUmVzaXplID0ge30pKTtcbmNvbnN0IEtleWJvYXJkID0ge1xuICBnZXRFbmdpbmUoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLkNhcGFjaXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzUGx1Z2luQXZhaWxhYmxlKCdLZXlib2FyZCcpKSAmJiAod2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLkNhcGFjaXRvci5QbHVnaW5zLktleWJvYXJkKTtcbiAgfSxcbiAgZ2V0UmVzaXplTW9kZSgpIHtcbiAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmdldEVuZ2luZSgpO1xuICAgIGlmICghZW5naW5lIHx8ICFlbmdpbmUuZ2V0UmVzaXplTW9kZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgIH1cbiAgICByZXR1cm4gZW5naW5lLmdldFJlc2l6ZU1vZGUoKTtcbiAgfSxcbn07XG5cbmNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlbG9jYXRlSW5wdXQgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZFJlbG9jYXRlLCBpbnB1dFJlbGF0aXZlWSA9IDAsIGRpc2FibGVkQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICBpZiAoY2xvbmVNYXAuaGFzKGNvbXBvbmVudEVsKSA9PT0gc2hvdWxkUmVsb2NhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNob3VsZFJlbG9jYXRlKSB7XG4gICAgYWRkQ2xvbmUoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZLCBkaXNhYmxlZENsb25lZElucHV0KTtcbiAgfVxuICBlbHNlIHtcbiAgICByZW1vdmVDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCk7XG4gIH1cbn07XG4vLyBUT0RPKEZXLTI4MzIpOiB0eXBlXG5jb25zdCBpc0ZvY3VzZWQgPSAoaW5wdXQpID0+IHtcbiAgcmV0dXJuIGlucHV0ID09PSBpbnB1dC5nZXRSb290Tm9kZSgpLmFjdGl2ZUVsZW1lbnQ7XG59O1xuY29uc3QgYWRkQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZLCBkaXNhYmxlZENsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgLy8gdGhpcyBhbGxvd3MgZm9yIHRoZSBhY3R1YWwgaW5wdXQgdG8gcmVjZWl2ZSB0aGUgZm9jdXMgZnJvbVxuICAvLyB0aGUgdXNlcidzIHRvdWNoIGV2ZW50LCBidXQgYmVmb3JlIGl0IHJlY2VpdmVzIGZvY3VzLCBpdFxuICAvLyBtb3ZlcyB0aGUgYWN0dWFsIGlucHV0IHRvIGEgbG9jYXRpb24gdGhhdCB3aWxsIG5vdCBzY3Jld1xuICAvLyB1cCB0aGUgYXBwJ3MgbGF5b3V0LCBhbmQgZG9lcyBub3QgYWxsb3cgdGhlIG5hdGl2ZSBicm93c2VyXG4gIC8vIHRvIGF0dGVtcHQgdG8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlIChtZXNzaW5nIHVwIGhlYWRlcnMvZm9vdGVycylcbiAgLy8gdGhlIGNsb25lZCBpbnB1dCBmaWxscyB0aGUgYXJlYSBvZiB3aGVyZSBuYXRpdmUgaW5wdXQgc2hvdWxkIGJlXG4gIC8vIHdoaWxlIHRoZSBuYXRpdmUgaW5wdXQgZmFrZXMgb3V0IHRoZSBicm93c2VyIGJ5IHJlbG9jYXRpbmcgaXRzZWxmXG4gIC8vIGJlZm9yZSBpdCByZWNlaXZlcyB0aGUgYWN0dWFsIGZvY3VzIGV2ZW50XG4gIC8vIFdlIGhpZGUgdGhlIGZvY3VzZWQgaW5wdXQgKHdpdGggdGhlIHZpc2libGUgY2FyZXQpIGludmlzaWJsZSBieSBtYWtpbmcgaXQgc2NhbGUoMCksXG4gIGNvbnN0IHBhcmVudEVsID0gaW5wdXRFbC5wYXJlbnROb2RlO1xuICAvLyBET00gV1JJVEVTXG4gIGNvbnN0IGNsb25lZEVsID0gaW5wdXRFbC5jbG9uZU5vZGUoZmFsc2UpO1xuICBjbG9uZWRFbC5jbGFzc0xpc3QuYWRkKCdjbG9uZWQtaW5wdXQnKTtcbiAgY2xvbmVkRWwudGFiSW5kZXggPSAtMTtcbiAgLyoqXG4gICAqIE1ha2luZyB0aGUgY2xvbmVkIGlucHV0IGRpc2FibGVkIHByZXZlbnRzXG4gICAqIENocm9tZSBmb3IgQW5kcm9pZCBmcm9tIHN0aWxsIHNjcm9sbGluZ1xuICAgKiB0aGUgZW50aXJlIHBhZ2Ugc2luY2UgdGhpcyBjbG9uZWQgaW5wdXRcbiAgICogd2lsbCBicmllZmx5IGJlIGhpZGRlbiBieSB0aGUga2V5Ym9hcmRcbiAgICogZXZlbiB0aG91Z2ggaXQgaXMgbm90IGZvY3VzZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgbm90IG5lZWRlZCBvbiBpT1MuIFdoaWxlIHRoaXNcbiAgICogZG9lcyBub3QgY2F1c2UgZnVuY3Rpb25hbCBpc3N1ZXMgb24gaU9TLFxuICAgKiB0aGUgaW5wdXQgc3RpbGwgYXBwZWFycyBzbGlnaHRseSBkaW1tZWQgZXZlblxuICAgKiBpZiB3ZSBzZXQgb3BhY2l0eTogMS5cbiAgICovXG4gIGlmIChkaXNhYmxlZENsb25lZElucHV0KSB7XG4gICAgY2xvbmVkRWwuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIHBhcmVudEVsLmFwcGVuZENoaWxkKGNsb25lZEVsKTtcbiAgY2xvbmVNYXAuc2V0KGNvbXBvbmVudEVsLCBjbG9uZWRFbCk7XG4gIGNvbnN0IGRvYyA9IGNvbXBvbmVudEVsLm93bmVyRG9jdW1lbnQ7XG4gIGNvbnN0IHR4ID0gZG9jLmRpciA9PT0gJ3J0bCcgPyA5OTk5IDogLTk5OTk7XG4gIGNvbXBvbmVudEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHh9cHgsJHtpbnB1dFJlbGF0aXZlWX1weCwwKSBzY2FsZSgwKWA7XG59O1xuY29uc3QgcmVtb3ZlQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwpID0+IHtcbiAgY29uc3QgY2xvbmUgPSBjbG9uZU1hcC5nZXQoY29tcG9uZW50RWwpO1xuICBpZiAoY2xvbmUpIHtcbiAgICBjbG9uZU1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIGNsb25lLnJlbW92ZSgpO1xuICB9XG4gIGNvbXBvbmVudEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbn07XG4vKipcbiAqIEZhY3RvcmluZyBpbiA1MHB4IGdpdmVzIHVzIHNvbWUgcm9vbVxuICogaW4gY2FzZSB0aGUga2V5Ym9hcmQgc2hvd3MgcGFzc3dvcmQvYXV0b2ZpbGwgYmFyc1xuICogYXN5bmNocm9ub3VzbHkuXG4gKi9cbmNvbnN0IFNDUk9MTF9BTU9VTlRfUEFERElORyA9IDUwO1xuXG5jb25zdCBlbmFibGVIaWRlQ2FyZXRPblNjcm9sbCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwpID0+IHtcbiAgaWYgKCFzY3JvbGxFbCB8fCAhaW5wdXRFbCkge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByZXR1cm47XG4gICAgfTtcbiAgfVxuICBjb25zdCBzY3JvbGxIaWRlQ2FyZXQgPSAoc2hvdWxkSGlkZUNhcmV0KSA9PiB7XG4gICAgaWYgKGlzRm9jdXNlZChpbnB1dEVsKSkge1xuICAgICAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkSGlkZUNhcmV0KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG9uQmx1ciA9ICgpID0+IHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlKTtcbiAgY29uc3QgaGlkZUNhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KHRydWUpO1xuICBjb25zdCBzaG93Q2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQoZmFsc2UpO1xuICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICBhZGRFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgb25CbHVyKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsU3RhcnQnLCBoaWRlQ2FyZXQpO1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxFbmQnLCBzaG93Q2FyZXQpO1xuICAgIGlucHV0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1cik7XG4gIH07XG59O1xuXG5jb25zdCBTS0lQX1NFTEVDVE9SID0gJ2lucHV0LCB0ZXh0YXJlYSwgW25vLWJsdXJdLCBbY29udGVudGVkaXRhYmxlXSc7XG5jb25zdCBlbmFibGVJbnB1dEJsdXJyaW5nID0gKCkgPT4ge1xuICBsZXQgZm9jdXNlZCA9IHRydWU7XG4gIGxldCBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IG9uU2Nyb2xsID0gKCkgPT4ge1xuICAgIGRpZFNjcm9sbCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IG9uRm9jdXNpbiA9ICgpID0+IHtcbiAgICBmb2N1c2VkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3Qgb25Ub3VjaGVuZCA9IChldikgPT4ge1xuICAgIC8vIGlmIGFwcCBkaWQgc2Nyb2xsIHJldHVybiBlYXJseVxuICAgIGlmIChkaWRTY3JvbGwpIHtcbiAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhY3RpdmUgPSBkb2MuYWN0aXZlRWxlbWVudDtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBvbmx5IGJsdXIgaWYgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIGEgdGV4dC1pbnB1dCBvciBhIHRleHRhcmVhXG4gICAgaWYgKGFjdGl2ZS5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGlmIHRoZSBzZWxlY3RlZCB0YXJnZXQgaXMgdGhlIGFjdGl2ZSBlbGVtZW50LCBkbyBub3QgYmx1clxuICAgIGNvbnN0IHRhcHBlZCA9IGV2LnRhcmdldDtcbiAgICBpZiAodGFwcGVkID09PSBhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRhcHBlZC5tYXRjaGVzKFNLSVBfU0VMRUNUT1IpIHx8IHRhcHBlZC5jbG9zZXN0KFNLSVBfU0VMRUNUT1IpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvY3VzZWQgPSBmYWxzZTtcbiAgICAvLyBUT0RPIEZXLTI3OTY6IGZpbmQgYSBiZXR0ZXIgd2F5LCB3aHkgNTBtcz9cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghZm9jdXNlZCkge1xuICAgICAgICBhY3RpdmUuYmx1cigpO1xuICAgICAgfVxuICAgIH0sIDUwKTtcbiAgfTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihkb2MsICdpb25TY3JvbGxTdGFydCcsIG9uU2Nyb2xsKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoZW5kLCBmYWxzZSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2MsICdpb25TY3JvbGxTdGFydCcsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbiwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICB9O1xufTtcblxuY29uc3QgU0NST0xMX0FTU0lTVF9TUEVFRCA9IDAuMztcbmNvbnN0IGdldFNjcm9sbERhdGEgPSAoY29tcG9uZW50RWwsIGNvbnRlbnRFbCwga2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgdmFyIF9hO1xuICBjb25zdCBpdGVtRWwgPSAoX2EgPSBjb21wb25lbnRFbC5jbG9zZXN0KCdpb24taXRlbSxbaW9uLWl0ZW1dJykpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGNvbXBvbmVudEVsO1xuICByZXR1cm4gY2FsY1Njcm9sbERhdGEoaXRlbUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBjb250ZW50RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGtleWJvYXJkSGVpZ2h0LCBjb21wb25lbnRFbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmlubmVySGVpZ2h0IC8vIFRPRE8oRlctMjgzMik6IHR5cGVcbiAgKTtcbn07XG5jb25zdCBjYWxjU2Nyb2xsRGF0YSA9IChpbnB1dFJlY3QsIGNvbnRlbnRSZWN0LCBrZXlib2FyZEhlaWdodCwgcGxhdGZvcm1IZWlnaHQpID0+IHtcbiAgLy8gY29tcHV0ZSBpbnB1dCdzIFkgdmFsdWVzIHJlbGF0aXZlIHRvIHRoZSBib2R5XG4gIGNvbnN0IGlucHV0VG9wID0gaW5wdXRSZWN0LnRvcDtcbiAgY29uc3QgaW5wdXRCb3R0b20gPSBpbnB1dFJlY3QuYm90dG9tO1xuICAvLyBjb21wdXRlIHZpc2libGUgYXJlYVxuICBjb25zdCB2aXNpYmxlQXJlYVRvcCA9IGNvbnRlbnRSZWN0LnRvcDtcbiAgY29uc3QgdmlzaWJsZUFyZWFCb3R0b20gPSBNYXRoLm1pbihjb250ZW50UmVjdC5ib3R0b20sIHBsYXRmb3JtSGVpZ2h0IC0ga2V5Ym9hcmRIZWlnaHQpO1xuICAvLyBjb21wdXRlIHNhZmUgYXJlYVxuICBjb25zdCBzYWZlQXJlYVRvcCA9IHZpc2libGVBcmVhVG9wICsgMTU7XG4gIGNvbnN0IHNhZmVBcmVhQm90dG9tID0gdmlzaWJsZUFyZWFCb3R0b20gLSBTQ1JPTExfQU1PVU5UX1BBRERJTkc7XG4gIC8vIGZpZ3VyZSBvdXQgaWYgZWFjaCBlZGdlIG9mIHRoZSBpbnB1dCBpcyB3aXRoaW4gdGhlIHNhZmUgYXJlYVxuICBjb25zdCBkaXN0YW5jZVRvQm90dG9tID0gc2FmZUFyZWFCb3R0b20gLSBpbnB1dEJvdHRvbTtcbiAgY29uc3QgZGlzdGFuY2VUb1RvcCA9IHNhZmVBcmVhVG9wIC0gaW5wdXRUb3A7XG4gIC8vIGRlc2lyZWRTY3JvbGxBbW91bnQgaXMgdGhlIG5lZ2F0ZWQgZGlzdGFuY2UgdG8gdGhlIHNhZmUgYXJlYSBhY2NvcmRpbmcgdG8gb3VyIGNhbGN1bGF0aW9ucy5cbiAgY29uc3QgZGVzaXJlZFNjcm9sbEFtb3VudCA9IE1hdGgucm91bmQoZGlzdGFuY2VUb0JvdHRvbSA8IDAgPyAtZGlzdGFuY2VUb0JvdHRvbSA6IGRpc3RhbmNlVG9Ub3AgPiAwID8gLWRpc3RhbmNlVG9Ub3AgOiAwKTtcbiAgLy8gb3VyIGNhbGN1bGF0aW9ucyBtYWtlIHNvbWUgYXNzdW1wdGlvbnMgdGhhdCBhcmVuJ3QgYWx3YXlzIHRydWUsIGxpa2UgdGhlIGtleWJvYXJkIGJlaW5nIGNsb3NlZCB3aGVuIGFuIGlucHV0XG4gIC8vIGdldHMgZm9jdXMsIHNvIG1ha2Ugc3VyZSB3ZSBkb24ndCBzY3JvbGwgdGhlIGlucHV0IGFib3ZlIHRoZSB2aXNpYmxlIGFyZWFcbiAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gTWF0aC5taW4oZGVzaXJlZFNjcm9sbEFtb3VudCwgaW5wdXRUb3AgLSB2aXNpYmxlQXJlYVRvcCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoc2Nyb2xsQW1vdW50KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkaXN0YW5jZSAvIFNDUk9MTF9BU1NJU1RfU1BFRUQ7XG4gIGNvbnN0IHNjcm9sbER1cmF0aW9uID0gTWF0aC5taW4oNDAwLCBNYXRoLm1heCgxNTAsIGR1cmF0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsQW1vdW50LFxuICAgIHNjcm9sbER1cmF0aW9uLFxuICAgIHNjcm9sbFBhZGRpbmc6IGtleWJvYXJkSGVpZ2h0LFxuICAgIGlucHV0U2FmZVk6IC0oaW5wdXRUb3AgLSBzYWZlQXJlYVRvcCkgKyA0LFxuICB9O1xufTtcblxuY29uc3QgUEFERElOR19USU1FUl9LRVkgPSAnJGlvblBhZGRpbmdUaW1lcic7XG4vKipcbiAqIFNjcm9sbCBwYWRkaW5nIGFkZHMgYWRkaXRpb25hbCBwYWRkaW5nIHRvIHRoZSBib3R0b21cbiAqIG9mIGlvbi1jb250ZW50IHNvIHRoYXQgdGhlcmUgaXMgZW5vdWdoIHNjcm9sbCBzcGFjZVxuICogZm9yIGFuIGlucHV0IHRvIGJlIHNjcm9sbGVkIGFib3ZlIHRoZSBrZXlib2FyZC4gVGhpc1xuICogaXMgbmVlZGVkIGluIGVudmlyb25tZW50cyB3aGVyZSB0aGUgd2VidmlldyBkb2VzIG5vdFxuICogcmVzaXplIHdoZW4gdGhlIGtleWJvYXJkIG9wZW5zLlxuICpcbiAqIEV4YW1wbGU6IElmIGFuIGlucHV0IGF0IHRoZSBib3R0b20gb2YgaW9uLWNvbnRlbnQgaXNcbiAqIGZvY3VzZWQsIHRoZXJlIGlzIG5vIGFkZGl0aW9uYWwgc2Nyb2xsaW5nIHNwYWNlIGJlbG93XG4gKiBpdCwgc28gdGhlIGlucHV0IGNhbm5vdCBiZSBzY3JvbGxlZCBhYm92ZSB0aGUga2V5Ym9hcmQuXG4gKiBTY3JvbGwgcGFkZGluZyBmaXhlcyB0aGlzIGJ5IGFkZGluZyBwYWRkaW5nIGVxdWFsIHRvIHRoZVxuICogaGVpZ2h0IG9mIHRoZSBrZXlib2FyZCB0byB0aGUgYm90dG9tIG9mIHRoZSBjb250ZW50LlxuICpcbiAqIENvbW1vbiBlbnZpcm9ubWVudHMgd2hlcmUgdGhpcyBpcyBuZWVkZWQ6XG4gKiAtIE1vYmlsZSBTYWZhcmk6IFRoZSBrZXlib2FyZCBvdmVybGF5cyB0aGUgY29udGVudFxuICogLSBDYXBhY2l0b3IvQ29yZG92YSBvbiBpT1M6IFRoZSBrZXlib2FyZCBvdmVybGF5cyB0aGUgY29udGVudFxuICogd2hlbiB0aGUgS2V5Ym9hcmRSZXNpemUgbW9kZSBpcyBzZXQgdG8gJ25vbmUnLlxuICovXG5jb25zdCBzZXRTY3JvbGxQYWRkaW5nID0gKGNvbnRlbnRFbCwgcGFkZGluZ0Ftb3VudCwgY2xlYXJDYWxsYmFjaykgPT4ge1xuICBjb25zdCB0aW1lciA9IGNvbnRlbnRFbFtQQURESU5HX1RJTUVSX0tFWV07XG4gIGlmICh0aW1lcikge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gIH1cbiAgaWYgKHBhZGRpbmdBbW91bnQgPiAwKSB7XG4gICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsIGAke3BhZGRpbmdBbW91bnR9cHhgKTtcbiAgfVxuICBlbHNlIHtcbiAgICBjb250ZW50RWxbUEFERElOR19USU1FUl9LRVldID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb250ZW50RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgJzBweCcpO1xuICAgICAgaWYgKGNsZWFyQ2FsbGJhY2spIHtcbiAgICAgICAgY2xlYXJDYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sIDEyMCk7XG4gIH1cbn07XG4vKipcbiAqIFdoZW4gYW4gaW5wdXQgaXMgYWJvdXQgdG8gYmUgZm9jdXNlZCxcbiAqIHNldCBhIHRpbWVvdXQgdG8gY2xlYXIgYW55IHNjcm9sbCBwYWRkaW5nXG4gKiBvbiB0aGUgY29udGVudC4gTm90ZTogVGhlIGNsZWFyaW5nXG4gKiBpcyBkb25lIG9uIGEgdGltZW91dCBzbyB0aGF0IGlmIHVzZXJzXG4gKiBhcmUgbW92aW5nIGZvY3VzIGZyb20gb25lIGlucHV0IHRvIHRoZSBuZXh0XG4gKiB0aGVuIHJlLWFkZGluZyBzY3JvbGwgcGFkZGluZyB0byB0aGUgbmV3XG4gKiBpbnB1dCB3aXRoIGNhbmNlbCB0aGUgdGltZW91dCB0byBjbGVhciB0aGVcbiAqIHNjcm9sbCBwYWRkaW5nLlxuICovXG5jb25zdCBzZXRDbGVhclNjcm9sbFBhZGRpbmdMaXN0ZW5lciA9IChpbnB1dEVsLCBjb250ZW50RWwsIGRvbmVDYWxsYmFjaykgPT4ge1xuICBjb25zdCBjbGVhclNjcm9sbFBhZGRpbmcgPSAoKSA9PiB7XG4gICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgc2V0U2Nyb2xsUGFkZGluZyhjb250ZW50RWwsIDAsIGRvbmVDYWxsYmFjayk7XG4gICAgfVxuICB9O1xuICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgY2xlYXJTY3JvbGxQYWRkaW5nLCB7IG9uY2U6IHRydWUgfSk7XG59O1xuXG5sZXQgY3VycmVudFBhZGRpbmcgPSAwO1xuY29uc3QgZW5hYmxlU2Nyb2xsQXNzaXN0ID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZW5hYmxlU2Nyb2xsUGFkZGluZywga2V5Ym9hcmRSZXNpemUsIGRpc2FibGVDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gIC8qKlxuICAgKiBTY3JvbGwgcGFkZGluZyBzaG91bGQgb25seSBiZSBhZGRlZCBpZjpcbiAgICogMS4gVGhlIGdsb2JhbCBzY3JvbGxQYWRkaW5nIGNvbmZpZyBvcHRpb25cbiAgICogaXMgc2V0IHRvIHRydWUuXG4gICAqIDIuIFRoZSBuYXRpdmUga2V5Ym9hcmQgcmVzaXplIG1vZGUgaXMgZWl0aGVyIFwibm9uZVwiXG4gICAqIChrZXlib2FyZCBvdmVybGF5cyB3ZWJ2aWV3KSBvciB1bmRlZmluZWQgKHJlc2l6ZVxuICAgKiBpbmZvcm1hdGlvbiB1bmF2YWlsYWJsZSlcbiAgICogUmVzaXplIGluZm8gaXMgYXZhaWxhYmxlIG9uIENhcGFjaXRvciA0K1xuICAgKi9cbiAgY29uc3QgYWRkU2Nyb2xsUGFkZGluZyA9IGVuYWJsZVNjcm9sbFBhZGRpbmcgJiYgKGtleWJvYXJkUmVzaXplID09PSB1bmRlZmluZWQgfHwga2V5Ym9hcmRSZXNpemUubW9kZSA9PT0gS2V5Ym9hcmRSZXNpemUuTm9uZSk7XG4gIC8qKlxuICAgKiBXaGVuIHRoZSBpbnB1dCBpcyBhYm91dCB0byByZWNlaXZlXG4gICAqIGZvY3VzLCB3ZSBuZWVkIHRvIG1vdmUgaXQgdG8gcHJldmVudFxuICAgKiBtb2JpbGUgU2FmYXJpIGZyb20gYWRqdXN0aW5nIHRoZSB2aWV3cG9ydC5cbiAgICovXG4gIGNvbnN0IGZvY3VzSW4gPSBhc3luYyAoKSA9PiB7XG4gICAganNTZXRGb2N1cyhjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGFkZFNjcm9sbFBhZGRpbmcsIGRpc2FibGVDbG9uZWRJbnB1dCk7XG4gIH07XG4gIGNvbXBvbmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBmb2N1c0luLCB0cnVlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgZm9jdXNJbiwgdHJ1ZSk7XG4gIH07XG59O1xuY29uc3QganNTZXRGb2N1cyA9IGFzeW5jIChjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGVuYWJsZVNjcm9sbFBhZGRpbmcsIGRpc2FibGVDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gIGlmICghY29udGVudEVsICYmICFmb290ZXJFbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBzY3JvbGxEYXRhID0gZ2V0U2Nyb2xsRGF0YShjb21wb25lbnRFbCwgKGNvbnRlbnRFbCB8fCBmb290ZXJFbCksIGtleWJvYXJkSGVpZ2h0KTtcbiAgaWYgKGNvbnRlbnRFbCAmJiBNYXRoLmFicyhzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCkgPCA0KSB7XG4gICAgLy8gdGhlIHRleHQgaW5wdXQgaXMgaW4gYSBzYWZlIHBvc2l0aW9uIHRoYXQgZG9lc24ndFxuICAgIC8vIHJlcXVpcmUgaXQgdG8gYmUgc2Nyb2xsZWQgaW50byB2aWV3LCBqdXN0IHNldCBmb2N1cyBub3dcbiAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgLyoqXG4gICAgICogRXZlbiB0aG91Z2ggdGhlIGlucHV0IGRvZXMgbm90IG5lZWRcbiAgICAgKiBzY3JvbGwgYXNzaXN0LCB3ZSBzaG91bGQgcHJlc2VydmUgdGhlXG4gICAgICogdGhlIHNjcm9sbCBwYWRkaW5nIGFzIHVzZXJzIGNvdWxkIGJlIG1vdmluZ1xuICAgICAqIGZvY3VzIGZyb20gYW4gaW5wdXQgdGhhdCBuZWVkcyBzY3JvbGwgcGFkZGluZ1xuICAgICAqIHRvIGFuIGlucHV0IHRoYXQgZG9lcyBub3QgbmVlZCBzY3JvbGwgcGFkZGluZy5cbiAgICAgKiBJZiB3ZSByZW1vdmUgdGhlIHNjcm9sbCBwYWRkaW5nIG5vdywgdXNlcnMgd2lsbFxuICAgICAqIHNlZSB0aGUgcGFnZSBqdW1wLlxuICAgICAqL1xuICAgIGlmIChlbmFibGVTY3JvbGxQYWRkaW5nICYmIGNvbnRlbnRFbCAhPT0gbnVsbCkge1xuICAgICAgY3VycmVudFBhZGRpbmcgKz0gc2Nyb2xsRGF0YS5zY3JvbGxQYWRkaW5nO1xuICAgICAgc2V0U2Nyb2xsUGFkZGluZyhjb250ZW50RWwsIGN1cnJlbnRQYWRkaW5nKTtcbiAgICAgIHNldENsZWFyU2Nyb2xsUGFkZGluZ0xpc3RlbmVyKGlucHV0RWwsIGNvbnRlbnRFbCwgKCkgPT4gKGN1cnJlbnRQYWRkaW5nID0gMCkpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IGZyZWFrIG91dCB3aGlsZSBpdCdzIHRyeWluZyB0byBnZXQgdGhlIGlucHV0IGluIHBsYWNlXG4gIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZLCBkaXNhYmxlQ2xvbmVkSW5wdXQpO1xuICBpbnB1dEVsLmZvY3VzKCk7XG4gIC8qKlxuICAgKiBSZWxvY2F0aW5nL0ZvY3VzaW5nIGlucHV0IGNhdXNlcyB0aGVcbiAgICogY2xpY2sgZXZlbnQgdG8gYmUgY2FuY2VsbGVkLCBzb1xuICAgKiBtYW51YWxseSBmaXJlIG9uZSBoZXJlLlxuICAgKi9cbiAgcmFmKCgpID0+IGNvbXBvbmVudEVsLmNsaWNrKCkpO1xuICAvKipcbiAgICogSWYgZW5hYmxlZCwgd2UgY2FuIGFkZCBzY3JvbGwgcGFkZGluZyB0b1xuICAgKiB0aGUgYm90dG9tIG9mIHRoZSBjb250ZW50IHNvIHRoYXQgc2Nyb2xsIGFzc2lzdFxuICAgKiBoYXMgZW5vdWdoIHJvb20gdG8gc2Nyb2xsIHRoZSBpbnB1dCBhYm92ZVxuICAgKiB0aGUga2V5Ym9hcmQuXG4gICAqL1xuICBpZiAoZW5hYmxlU2Nyb2xsUGFkZGluZyAmJiBjb250ZW50RWwpIHtcbiAgICBjdXJyZW50UGFkZGluZyArPSBzY3JvbGxEYXRhLnNjcm9sbFBhZGRpbmc7XG4gICAgc2V0U2Nyb2xsUGFkZGluZyhjb250ZW50RWwsIGN1cnJlbnRQYWRkaW5nKTtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZXQgc2Nyb2xsQ29udGVudFRpbWVvdXQ7XG4gICAgY29uc3Qgc2Nyb2xsQ29udGVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8vIGNsZWFuIHVwIGxpc3RlbmVycyBhbmQgdGltZW91dHNcbiAgICAgIGlmIChzY3JvbGxDb250ZW50VGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxDb250ZW50VGltZW91dCk7XG4gICAgICB9XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgIC8vIHNjcm9sbCB0aGUgaW5wdXQgaW50byBwbGFjZVxuICAgICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgICBhd2FpdCBzY3JvbGxCeVBvaW50KGNvbnRlbnRFbCwgMCwgc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQsIHNjcm9sbERhdGEuc2Nyb2xsRHVyYXRpb24pO1xuICAgICAgfVxuICAgICAgLy8gdGhlIHNjcm9sbCB2aWV3IGlzIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uIG5vd1xuICAgICAgLy8gZ2l2ZSB0aGUgbmF0aXZlIHRleHQgaW5wdXQgZm9jdXNcbiAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlLCBzY3JvbGxEYXRhLmlucHV0U2FmZVkpO1xuICAgICAgLy8gZW5zdXJlIHRoaXMgaXMgdGhlIGZvY3VzZWQgaW5wdXRcbiAgICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgaW5wdXQgaXMgYWJvdXQgdG8gYmUgYmx1cnJlZFxuICAgICAgICogd2Ugc2hvdWxkIHNldCBhIHRpbWVvdXQgdG8gcmVtb3ZlXG4gICAgICAgKiBhbnkgc2Nyb2xsIHBhZGRpbmcuXG4gICAgICAgKi9cbiAgICAgIGlmIChlbmFibGVTY3JvbGxQYWRkaW5nKSB7XG4gICAgICAgIHNldENsZWFyU2Nyb2xsUGFkZGluZ0xpc3RlbmVyKGlucHV0RWwsIGNvbnRlbnRFbCwgKCkgPT4gKGN1cnJlbnRQYWRkaW5nID0gMCkpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lcik7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgfTtcbiAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICBjb25zdCBzY3JvbGxFbCA9IGF3YWl0IGdldFNjcm9sbEVsZW1lbnQoY29udGVudEVsKTtcbiAgICAgIC8qKlxuICAgICAgICogc2Nyb2xsRGF0YSB3aWxsIG9ubHkgY29uc2lkZXIgdGhlIGFtb3VudCB3ZSBuZWVkXG4gICAgICAgKiB0byBzY3JvbGwgaW4gb3JkZXIgdG8gcHJvcGVybHkgYnJpbmcgdGhlIGlucHV0XG4gICAgICAgKiBpbnRvIHZpZXcuIEl0IHdpbGwgbm90IGNvbnNpZGVyIHRoZSBhbW91bnRcbiAgICAgICAqIHdlIGNhbiBzY3JvbGwgaW4gdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgICAqIEFzIGEgcmVzdWx0LCBzY3JvbGxEYXRhIG1heSByZXF1ZXN0IGEgZ3JlYXRlclxuICAgICAgICogc2Nyb2xsIHBvc2l0aW9uIHRoYW4gaXMgY3VycmVudGx5IGF2YWlsYWJsZVxuICAgICAgICogaW4gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgd2UgbmVlZCB0b1xuICAgICAgICogd2FpdCBmb3IgdGhlIHdlYnZpZXcgdG8gcmVzaXplL3RoZSBrZXlib2FyZFxuICAgICAgICogdG8gc2hvdyBpbiBvcmRlciBmb3IgYWRkaXRpb25hbCBzY3JvbGxcbiAgICAgICAqIGJhbmR3aWR0aCB0byBiZWNvbWUgYXZhaWxhYmxlLlxuICAgICAgICovXG4gICAgICBjb25zdCB0b3RhbFNjcm9sbEFtb3VudCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHNjcm9sbEVsLmNsaWVudEhlaWdodDtcbiAgICAgIGlmIChzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCA+IHRvdGFsU2Nyb2xsQW1vdW50IC0gc2Nyb2xsRWwuc2Nyb2xsVG9wKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPbiBpT1MgZGV2aWNlcywgdGhlIHN5c3RlbSB3aWxsIHNob3cgYSBcIlBhc3N3b3Jkc1wiIGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAgICAgICogYWZ0ZXIgdGhlIGluaXRpYWwga2V5Ym9hcmQgaXMgc2hvd24uIFRoaXMgcHJldmVudHMgdGhlIHdlYnZpZXcgZnJvbSByZXNpemluZ1xuICAgICAgICAgKiB1bnRpbCB0aGUgXCJQYXNzd29yZHNcIiBiYXIgaXMgc2hvd24sIHNvIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhhdCB0byBoYXBwZW4gZmlyc3QuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoaW5wdXRFbC50eXBlID09PSAncGFzc3dvcmQnKSB7XG4gICAgICAgICAgLy8gQWRkIDUwcHggdG8gYWNjb3VudCBmb3IgdGhlIFwiUGFzc3dvcmRzXCIgYmFyXG4gICAgICAgICAgc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQgKz0gU0NST0xMX0FNT1VOVF9QQURESU5HO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBzaG91bGQgb25seSBmaXJlIGluIDIgaW5zdGFuY2VzOlxuICAgICAgICAgKiAxLiBUaGUgYXBwIGlzIHZlcnkgc2xvdy5cbiAgICAgICAgICogMi4gVGhlIGFwcCBpcyBydW5uaW5nIGluIGEgYnJvd3NlciBvbiBhbiBvbGQgT1NcbiAgICAgICAgICogdGhhdCBkb2VzIG5vdCBzdXBwb3J0IElvbmljIEtleWJvYXJkIEV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgc2Nyb2xsQ29udGVudFRpbWVvdXQgPSBzZXRUaW1lb3V0KHNjcm9sbENvbnRlbnQsIDEwMDApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHNjcm9sbENvbnRlbnQoKTtcbiAgfVxufTtcblxuY29uc3QgSU5QVVRfQkxVUlJJTkcgPSB0cnVlO1xuY29uc3Qgc3RhcnRJbnB1dFNoaW1zID0gYXN5bmMgKGNvbmZpZywgcGxhdGZvcm0pID0+IHtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IGlzSU9TID0gcGxhdGZvcm0gPT09ICdpb3MnO1xuICBjb25zdCBpc0FuZHJvaWQgPSBwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnO1xuICAvKipcbiAgICogSGlkZSBDYXJldCBhbmQgSW5wdXQgQmx1cnJpbmcgYXJlIG5lZWRlZCBvbiBpT1MuXG4gICAqIFNjcm9sbCBBc3Npc3QgYW5kIFNjcm9sbCBQYWRkaW5nIGFyZSBuZWVkZWQgb24gaU9TIGFuZCBBbmRyb2lkXG4gICAqIHdpdGggQ2hyb21lIHdlYiBicm93c2VyIChub3QgQ2hyb21lIHdlYnZpZXcpLlxuICAgKi9cbiAgY29uc3Qga2V5Ym9hcmRIZWlnaHQgPSBjb25maWcuZ2V0TnVtYmVyKCdrZXlib2FyZEhlaWdodCcsIDI5MCk7XG4gIGNvbnN0IHNjcm9sbEFzc2lzdCA9IGNvbmZpZy5nZXRCb29sZWFuKCdzY3JvbGxBc3Npc3QnLCB0cnVlKTtcbiAgY29uc3QgaGlkZUNhcmV0ID0gY29uZmlnLmdldEJvb2xlYW4oJ2hpZGVDYXJldE9uU2Nyb2xsJywgaXNJT1MpO1xuICBjb25zdCBpbnB1dEJsdXJyaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ2lucHV0Qmx1cnJpbmcnLCBpc0lPUyk7XG4gIGNvbnN0IHNjcm9sbFBhZGRpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsUGFkZGluZycsIHRydWUpO1xuICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgLyoqXG4gICAqIEdyYWIgdGhlIG5hdGl2ZSBrZXlib2FyZCByZXNpemUgY29uZmlndXJhdGlvblxuICAgKiBhbmQgcGFzcyBpdCB0byBzY3JvbGwgYXNzaXN0LiBTY3JvbGwgYXNzaXN0IHJlcXVpcmVzXG4gICAqIHRoYXQgd2UgYWRqdXN0IHRoZSBpbnB1dCByaWdodCBiZWZvcmUgdGhlIGlucHV0XG4gICAqIGlzIGFib3V0IHRvIGJlIGZvY3VzZWQuIElmIHdlIGNhbGxlZCBgS2V5Ym9hcmQuZ2V0UmVzaXplTW9kZWBcbiAgICogb24gZm9jdXNpbiBpbiBzY3JvbGwgYXNzaXN0LCB3ZSBjb3VsZCBwb3RlbnRpYWxseSBhZGp1c3QgdGhlXG4gICAqIGlucHV0IHRvbyBsYXRlIHNpbmNlIHRoaXMgY2FsbCBpcyBhc3luYy5cbiAgICovXG4gIGNvbnN0IGtleWJvYXJkUmVzaXplTW9kZSA9IGF3YWl0IEtleWJvYXJkLmdldFJlc2l6ZU1vZGUoKTtcbiAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KGNvbXBvbmVudEVsLCByZXNvbHZlKSk7XG4gICAgY29uc3QgaW5wdXRSb290ID0gY29tcG9uZW50RWwuc2hhZG93Um9vdCB8fCBjb21wb25lbnRFbDtcbiAgICBjb25zdCBpbnB1dEVsID0gaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgfHwgaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgY29uc3Qgc2Nyb2xsRWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoY29tcG9uZW50RWwpO1xuICAgIGNvbnN0IGZvb3RlckVsID0gIXNjcm9sbEVsID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZGF0ZS9kYXRldGltZS1sb2NhbGUgaW5wdXRzIG9uIG1vYmlsZSBkZXZpY2VzIHNob3cgZGF0ZSBwaWNrZXJcbiAgICAgKiBvdmVybGF5cyBpbnN0ZWFkIG9mIGtleWJvYXJkcy4gQXMgYSByZXN1bHQsIHNjcm9sbCBhc3Npc3QgaXNcbiAgICAgKiBub3QgbmVlZGVkLiBUaGlzIGFsc28gd29ya3MgYXJvdW5kIGEgYnVnIGluIGlPUyA8MTYgd2hlcmVcbiAgICAgKiBzY3JvbGwgYXNzaXN0IGNhdXNlcyB0aGUgYnJvd3NlciB0byBsb2NrIHVwLiBTZWUgRlctMTk5Ny5cbiAgICAgKi9cbiAgICBjb25zdCBpc0RhdGVJbnB1dCA9IGlucHV0RWwudHlwZSA9PT0gJ2RhdGUnIHx8IGlucHV0RWwudHlwZSA9PT0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICBpZiAoIWlzRGF0ZUlucHV0ICYmXG4gICAgICAoISFzY3JvbGxFbCB8fCAhIWZvb3RlckVsKSAmJlxuICAgICAgc2Nyb2xsQXNzaXN0ICYmXG4gICAgICAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIHNjcm9sbFBhZGRpbmcsIGtleWJvYXJkUmVzaXplTW9kZSwgaXNBbmRyb2lkKTtcbiAgICAgIHNjcm9sbEFzc2lzdE1hcC5zZXQoY29tcG9uZW50RWwsIHJtRm4pO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgdW5yZWdpc3RlcklucHV0ID0gKGNvbXBvbmVudEVsKSA9PiB7XG4gICAgaWYgKGhpZGVDYXJldCkge1xuICAgICAgY29uc3QgZm4gPSBoaWRlQ2FyZXRNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgICAgIGlmIChmbikge1xuICAgICAgICBmbigpO1xuICAgICAgfVxuICAgICAgaGlkZUNhcmV0TWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgfVxuICAgIGlmIChzY3JvbGxBc3Npc3QpIHtcbiAgICAgIGNvbnN0IGZuID0gc2Nyb2xsQXNzaXN0TWFwLmdldChjb21wb25lbnRFbCk7XG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICAgIHNjcm9sbEFzc2lzdE1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIH1cbiAgfTtcbiAgaWYgKGlucHV0Qmx1cnJpbmcgJiYgSU5QVVRfQkxVUlJJTkcpIHtcbiAgICBlbmFibGVJbnB1dEJsdXJyaW5nKCk7XG4gIH1cbiAgLy8gSW5wdXQgbWlnaHQgYmUgYWxyZWFkeSBsb2FkZWQgaW4gdGhlIERPTSBiZWZvcmUgaW9uLWRldmljZS1oYWNrcyBkaWQuXG4gIC8vIEF0IHRoaXMgcG9pbnQgd2UgbmVlZCB0byBsb29rIGZvciBhbGwgb2YgdGhlIGlucHV0cyBub3QgcmVnaXN0ZXJlZCB5ZXRcbiAgLy8gYW5kIHJlZ2lzdGVyIHRoZW0uXG4gIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgcmVnaXN0ZXJJbnB1dChpbnB1dCk7XG4gIH1cbiAgLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkTG9hZCcsICgoZXYpID0+IHtcbiAgICByZWdpc3RlcklucHV0KGV2LmRldGFpbCk7XG4gIH0pKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkVW5sb2FkJywgKChldikgPT4ge1xuICAgIHVucmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG59O1xuXG5leHBvcnQgeyBzdGFydElucHV0U2hpbXMgfTtcbiJdLCJuYW1lcyI6WyJnIiwiZ2V0U2Nyb2xsRWxlbWVudCIsImMiLCJzY3JvbGxCeVBvaW50IiwiZiIsImZpbmRDbG9zZXN0SW9uQ29udGVudCIsImEiLCJhZGRFdmVudExpc3RlbmVyIiwiYiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyIiwicmFmIiwiY29tcG9uZW50T25SZWFkeSIsInciLCJ3aW4iLCJLZXlib2FyZFJlc2l6ZSIsIktleWJvYXJkIiwiZ2V0RW5naW5lIiwiX2EiLCJDYXBhY2l0b3IiLCJpc1BsdWdpbkF2YWlsYWJsZSIsIlBsdWdpbnMiLCJnZXRSZXNpemVNb2RlIiwiZW5naW5lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1bmRlZmluZWQiLCJjbG9uZU1hcCIsIldlYWtNYXAiLCJyZWxvY2F0ZUlucHV0IiwiY29tcG9uZW50RWwiLCJpbnB1dEVsIiwic2hvdWxkUmVsb2NhdGUiLCJpbnB1dFJlbGF0aXZlWSIsImRpc2FibGVkQ2xvbmVkSW5wdXQiLCJoYXMiLCJhZGRDbG9uZSIsInJlbW92ZUNsb25lIiwiaXNGb2N1c2VkIiwiaW5wdXQiLCJnZXRSb290Tm9kZSIsImFjdGl2ZUVsZW1lbnQiLCJwYXJlbnRFbCIsInBhcmVudE5vZGUiLCJjbG9uZWRFbCIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFkZCIsInRhYkluZGV4IiwiZGlzYWJsZWQiLCJhcHBlbmRDaGlsZCIsInNldCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJ0eCIsImRpciIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsInRyYW5zZm9ybSIsImNsb25lIiwiZ2V0IiwiZGVsZXRlIiwicmVtb3ZlIiwiU0NST0xMX0FNT1VOVF9QQURESU5HIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsIlNLSVBfU0VMRUNUT1IiLCJlbmFibGVJbnB1dEJsdXJyaW5nIiwiZm9jdXNlZCIsImRpZFNjcm9sbCIsImRvY3VtZW50Iiwib25TY3JvbGwiLCJvbkZvY3VzaW4iLCJvblRvdWNoZW5kIiwiZXYiLCJhY3RpdmUiLCJtYXRjaGVzIiwidGFwcGVkIiwidGFyZ2V0IiwiY2xvc2VzdCIsInNldFRpbWVvdXQiLCJibHVyIiwiU0NST0xMX0FTU0lTVF9TUEVFRCIsImdldFNjcm9sbERhdGEiLCJjb250ZW50RWwiLCJrZXlib2FyZEhlaWdodCIsIml0ZW1FbCIsImNhbGNTY3JvbGxEYXRhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGVmYXVsdFZpZXciLCJpbm5lckhlaWdodCIsImlucHV0UmVjdCIsImNvbnRlbnRSZWN0IiwicGxhdGZvcm1IZWlnaHQiLCJpbnB1dFRvcCIsInRvcCIsImlucHV0Qm90dG9tIiwiYm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJ2aXNpYmxlQXJlYUJvdHRvbSIsIk1hdGgiLCJtaW4iLCJzYWZlQXJlYVRvcCIsInNhZmVBcmVhQm90dG9tIiwiZGlzdGFuY2VUb0JvdHRvbSIsImRpc3RhbmNlVG9Ub3AiLCJkZXNpcmVkU2Nyb2xsQW1vdW50Iiwicm91bmQiLCJzY3JvbGxBbW91bnQiLCJkaXN0YW5jZSIsImFicyIsImR1cmF0aW9uIiwic2Nyb2xsRHVyYXRpb24iLCJtYXgiLCJzY3JvbGxQYWRkaW5nIiwiaW5wdXRTYWZlWSIsIlBBRERJTkdfVElNRVJfS0VZIiwic2V0U2Nyb2xsUGFkZGluZyIsInBhZGRpbmdBbW91bnQiLCJjbGVhckNhbGxiYWNrIiwidGltZXIiLCJjbGVhclRpbWVvdXQiLCJzZXRQcm9wZXJ0eSIsInNldENsZWFyU2Nyb2xsUGFkZGluZ0xpc3RlbmVyIiwiZG9uZUNhbGxiYWNrIiwiY2xlYXJTY3JvbGxQYWRkaW5nIiwib25jZSIsImN1cnJlbnRQYWRkaW5nIiwiZW5hYmxlU2Nyb2xsQXNzaXN0IiwiZm9vdGVyRWwiLCJlbmFibGVTY3JvbGxQYWRkaW5nIiwia2V5Ym9hcmRSZXNpemUiLCJkaXNhYmxlQ2xvbmVkSW5wdXQiLCJhZGRTY3JvbGxQYWRkaW5nIiwibW9kZSIsIk5vbmUiLCJmb2N1c0luIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yIiwianNTZXRGb2N1cyIsImFwcGx5IiwiYXJndW1lbnRzIiwiX3JlZjIiLCJzY3JvbGxEYXRhIiwiZm9jdXMiLCJjbGljayIsIndpbmRvdyIsInNjcm9sbENvbnRlbnRUaW1lb3V0Iiwic2Nyb2xsQ29udGVudCIsIl9yZWYzIiwiZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyIiwidG90YWxTY3JvbGxBbW91bnQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxUb3AiLCJ0eXBlIiwiX3giLCJfeDIiLCJfeDMiLCJfeDQiLCJfeDUiLCJfeDYiLCJJTlBVVF9CTFVSUklORyIsInN0YXJ0SW5wdXRTaGltcyIsIl9yZWY0IiwiY29uZmlnIiwicGxhdGZvcm0iLCJpc0lPUyIsImlzQW5kcm9pZCIsImdldE51bWJlciIsInNjcm9sbEFzc2lzdCIsImdldEJvb2xlYW4iLCJpbnB1dEJsdXJyaW5nIiwiaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImhpZGVDYXJldE1hcCIsInNjcm9sbEFzc2lzdE1hcCIsImtleWJvYXJkUmVzaXplTW9kZSIsInJlZ2lzdGVySW5wdXQiLCJfcmVmNSIsImlucHV0Um9vdCIsInNoYWRvd1Jvb3QiLCJxdWVyeVNlbGVjdG9yIiwicm1GbiIsImlzRGF0ZUlucHV0IiwiX3g5IiwidW5yZWdpc3RlcklucHV0IiwiZm4iLCJkZXRhaWwiLCJfeDciLCJfeDgiXSwic291cmNlUm9vdCI6IndlYnBhY2s6Ly8vIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==